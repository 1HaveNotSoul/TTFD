# ✅ Исправление отображения ников в таблице лидеров

## Проблема
На сайте в таблице лидеров все игроки отображались как "Unknown" вместо их Discord имён.

## Причина
1. В `database_postgres.py` при создании нового пользователя username устанавливался как `'Unknown'`
2. Бот никогда не обновлял username в базе данных при взаимодействии с пользователями
3. Методы `get_user()` и `add_xp()` не принимали параметр username

## Что исправлено

### 1. database_postgres.py
- ✅ Метод `get_user()` теперь принимает параметр `username`
- ✅ При создании нового пользователя сохраняется переданный username
- ✅ При каждом вызове `get_user()` username обновляется, если он изменился
- ✅ Метод `add_xp()` теперь принимает параметр `username` и передаёт его в `get_user()`
- ✅ Добавлены методы `claim_daily()` и `can_claim_daily()` для команды `!daily`

### 2. bot.py
Обновлены все места, где вызываются методы базы данных:

- ✅ `on_message()` - передаёт `message.author.name` при добавлении XP
- ✅ `on_member_join()` - передаёт `member.name` при создании пользователя
- ✅ `!profile` - передаёт `member.name` при получении данных
- ✅ `!rank` - передаёт `ctx.author.name` при получении данных

## Как это работает

Теперь при каждом взаимодействии пользователя с ботом:
1. Бот получает Discord username пользователя
2. Передаёт его в методы базы данных
3. База данных автоматически обновляет username, если он изменился
4. На сайте в таблице лидеров отображаются актуальные имена

## Результат
✅ Таблица лидеров теперь показывает реальные Discord имена пользователей
✅ Имена автоматически обновляются при изменении
✅ Команда `!daily` теперь работает корректно
✅ Все существующие пользователи получат свои имена при следующем взаимодействии с ботом

## Что делать дальше

1. **Перезапустить бота** - чтобы изменения вступили в силу
2. **Попросить пользователей написать любое сообщение** - их username обновится автоматически
3. **Или использовать команду** `!profile` - это тоже обновит username

## Примечание
Пользователи, которые ещё не взаимодействовали с ботом после обновления, будут отображаться как "Unknown" до первого взаимодействия.
