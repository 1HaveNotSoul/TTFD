═══════════════════════════════════════════════════════════════
📦 TTFD Shared - Unified Database Integration
═══════════════════════════════════════════════════════════════

Этот модуль объединяет все платформы TTFD через единую PostgreSQL БД.


ФАЙЛЫ В ЭТОЙ ПАПКЕ:
═══════════════════════════════════════════════════════════════

📄 models.py
   - Модели данных (UnifiedUser, Rank, CrossPlatformEvent)
   - 20 рангов от F до S
   - Поддержка всех платформ

📄 database_unified.py
   - Класс UnifiedDatabase для работы с БД
   - Методы для создания/обновления пользователей
   - Привязка платформ
   - Обработка событий

📄 migration_unified.sql
   - SQL миграция для создания таблиц
   - unified_users - единая таблица пользователей
   - cross_platform_events - события синхронизации

📄 migrate_to_unified.py
   - Скрипт миграции данных
   - Переносит пользователей из Telegram/Discord/Website
   - Автоматическая привязка аккаунтов

📄 apply_migration.py
   - Python скрипт для применения SQL миграции
   - Альтернатива psql

📄 sync_worker.py
   - Воркер для обработки событий синхронизации
   - Автоматическая синхронизация XP/монет/рангов

🚀 ПРИМЕНИТЬ_ИНТЕГРАЦИЮ_PYTHON.bat
   - Автоматическое применение интеграции (через Python)
   - Рекомендуется

🚀 ПРИМЕНИТЬ_ИНТЕГРАЦИЮ.bat
   - Автоматическое применение интеграции (через psql)
   - Требует PostgreSQL в PATH

📖 ИНСТРУКЦИЯ.txt
   - Пошаговая инструкция

📖 ЗАПУСТИТЬ_СЕЙЧАС.txt
   - Быстрая инструкция для запуска

📖 ЧТО_ДЕЛАТЬ_СЕЙЧАС.txt
   - Решение проблем

📄 requirements.txt
   - Зависимости Python


БЫСТРЫЙ СТАРТ:
═══════════════════════════════════════════════════════════════

1. pip install -r requirements.txt
2. Двойной клик на ПРИМЕНИТЬ_ИНТЕГРАЦИЮ_PYTHON.bat
3. Вставь DATABASE_URL из Railway
4. Готово!


АРХИТЕКТУРА:
═══════════════════════════════════════════════════════════════

Telegram Bot ──┐
               │
Discord Bot ───┼──► Unified Database (PostgreSQL)
               │
Website ───────┘


ТАБЛИЦЫ:
═══════════════════════════════════════════════════════════════

unified_users:
  - Единая таблица пользователей
  - Поддержка telegram_id, discord_id, website_email
  - XP, монеты, ранги, статистика

cross_platform_events:
  - События для синхронизации
  - Обрабатываются Sync Worker


ИСПОЛЬЗОВАНИЕ:
═══════════════════════════════════════════════════════════════

from database_unified import get_unified_db

# Получить пользователя
db = await get_unified_db()
user = await db.get_user_by_telegram("123456789")

# Обновить XP
result = await db.update_xp(user.id, delta_xp=50)

# Привязать Discord
await db.link_discord(user.id, "987654321")


ДОКУМЕНТАЦИЯ:
═══════════════════════════════════════════════════════════════

📖 ../ИНТЕГРАЦИЯ_ПЛАТФОРМ.md - Полная архитектура
📖 ../СЛЕДУЮЩИЕ_ШАГИ_ИНТЕГРАЦИЯ.md - Интеграция кода
📖 ../НАЧНИ_ОТСЮДА_ИНТЕГРАЦИЯ.txt - Быстрый старт


═══════════════════════════════════════════════════════════════
