========================================
🔧 ПРОВЕРКА ПРАВ БОТА ДЛЯ ВЫДАЧИ РОЛЕЙ
========================================

📅 Дата: 07.02.2026 13:25 МСК
⚠️ ПРОБЛЕМА: Роли не выдаются (1 ошибка)

========================================

❌ ПРОБЛЕМА:

!syncrankroles показывает:
- всего пользователей: 1
- обновлено: 0
- пропущено: 0
- ошибок: 1

Роли не выдаются автоматически.

========================================

🔍 ПРИЧИНЫ:

1. Роль бота ниже ролей рангов
2. У бота нет права "Manage Roles"
3. Роли рангов не существуют на сервере

========================================

✅ РЕШЕНИЕ:

ШАГ 1: ПРОВЕРЬ ИЕРАРХИЮ РОЛЕЙ

1. Зайди в настройки сервера Discord
2. Перейди в "Роли" (Roles)
3. Найди роль бота (TTFD)
4. Перетащи её ВЫШЕ всех ролей рангов:

   ПРАВИЛЬНАЯ ИЕРАРХИЯ:
   ┌─────────────────┐
   │ @everyone       │
   ├─────────────────┤
   │ F - ранг        │ ← Самая низкая
   │ E - ранг        │
   │ D - ранг        │
   │ C - ранг        │
   │ B - ранг        │
   │ A - ранг        │
   │ S - ранг        │
   ├─────────────────┤
   │ TTFD (бот)      │ ← ДОЛЖНА БЫТЬ ВЫШЕ!
   ├─────────────────┤
   │ Админ           │
   └─────────────────┘

========================================

ШАГ 2: ПРОВЕРЬ ПРАВА БОТА

1. Открой роль бота (TTFD)
2. Проверь что включено:
   
   ✅ Manage Roles (Управление ролями)
   ✅ View Channels (Просмотр каналов)
   ✅ Send Messages (Отправка сообщений)
   ✅ Read Message History (Чтение истории)

========================================

ШАГ 3: ПРОВЕРЬ СУЩЕСТВОВАНИЕ РОЛЕЙ

Убедись что все роли существуют:

F - ранг (ID: 1467727827473530931)
E - ранг (ID: 1467727807001137336)
D - ранг (ID: 1467727832456233113)
C - ранг (ID: 1467727811480649940)
B - ранг (ID: 1467727824558231653)
A - ранг (ID: 1467727451500187718)
S - ранг (ID: 1467727794296328234)

Если какой-то роли нет - создай её заново
и обнови ID через !setuprankroles

========================================

ШАГ 4: ПЕРЕЗАПУСТИ БОТА

После изменения иерархии:

1. Перезапусти бота на Railway
2. Попробуй снова: !syncrankroles

========================================

ШАГ 5: ПРОВЕРЬ РЕЗУЛЬТАТ

!syncrankroles

Должно быть:
✅ всего пользователей: 1
✅ обновлено: 1
✅ пропущено: 0
✅ ошибок: 0

========================================

🔍 ОТЛАДКА:

Если всё ещё не работает:

1. ПРОВЕРЬ ЛОГИ БОТА
   
   В консоли должно быть:
   ✅ Выдана роль E - ранг пользователю sex vs ex
   
   Или ошибка:
   ❌ Ошибка выдачи роли: Missing Permissions

2. ПРОВЕРЬ ПРАВА ВРУЧНУЮ
   
   Попробуй вручную выдать роль пользователю.
   Если не получается - проблема в правах.

3. ПРОВЕРЬ ID РОЛЕЙ
   
   !setuprankroles
   
   Убедись что все ID правильные.

========================================

💡 БЫСТРАЯ ПРОВЕРКА:

1. Роль бота выше ролей рангов? ✅/❌
2. У бота есть "Manage Roles"? ✅/❌
3. Все роли существуют? ✅/❌
4. Бот перезапущен? ✅/❌

Если всё ✅ - роли должны выдаваться!

========================================

⚙️ КОМАНДЫ ДЛЯ ПРОВЕРКИ:

!setuprankroles
- Показать текущие настройки ролей

!syncrankroles
- Синхронизировать роли всех пользователей

!balance
- Проверить свой XP

!work
- Заработать XP и проверить выдачу роли

========================================

📊 ТВОИ ДАННЫЕ:

XP: 250 (примерно)
Нужная роль: E - ранг (500 XP)
Текущая роль: нет

После исправления прав:
!syncrankroles → роль E выдастся автоматически

========================================

✅ ПОСЛЕ ИСПРАВЛЕНИЯ:

1. ✅ !balance работает
2. ✅ !syncrankroles выдаёт роли
3. ✅ !work автоматически выдаёт роли
4. ✅ Роли сохраняются навсегда

========================================

📅 Дата: 07.02.2026 13:25 МСК
👨‍💻 Разработчик: Kiro AI Assistant

========================================
