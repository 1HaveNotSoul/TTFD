# üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

## –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (3 —Å–ø–æ—Å–æ–±–∞)

### 1Ô∏è‚É£ –õ–æ–∫–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç (—Å–∞–º—ã–π –Ω–∞–¥—ë–∂–Ω—ã–π)

1. **–°–∫–æ–ø–∏—Ä—É–π DATABASE_URL –∏–∑ Railway:**
   - –û—Ç–∫—Ä–æ–π Railway ‚Üí Postgres ‚Üí Variables
   - –ù–∞–π–¥–∏ `DATABASE_URL`
   - –ù–∞–∂–º–∏ –Ω–∞ –∏–∫–æ–Ω–∫—É –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

2. **–î–æ–±–∞–≤—å –≤ .env —Ñ–∞–π–ª:**
   ```
   DATABASE_URL=postgresql://postgres:...—Ç–≤–æ–π_url...
   ```

3. **–ó–∞–ø—É—Å—Ç–∏ —Ç–µ—Å—Ç:**
   - –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –Ω–∞ `–¢–ï–°–¢_POSTGRESQL.bat`
   
   –ò–õ–ò –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
   ```bash
   cd TTFD/discord-bot
   python test_postgres_connection.py
   ```

4. **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
   - ‚úÖ "–í–°–Å –†–ê–ë–û–¢–ê–ï–¢!" ‚Üí PostgreSQL –ø–æ–¥–∫–ª—é—á–µ–Ω
   - ‚ùå –û—à–∏–±–∫–∞ ‚Üí —á–∏—Ç–∞–π —á—Ç–æ –Ω–∞–ø–∏—Å–∞–Ω–æ –∏ –∏—Å–ø—Ä–∞–≤—å

---

### 2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ Railway

1. –û—Ç–∫—Ä–æ–π **Railway ‚Üí TTFD (–±–æ—Ç) ‚Üí Deployments**
2. –û—Ç–∫—Ä–æ–π –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π
3. –ù–∞–∂–º–∏ **"View Logs"**
4. –ù–∞–π–¥–∏ –≤ –ª–æ–≥–∞—Ö:

**‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç:**
```
üîÑ –û–±–Ω–∞—Ä—É–∂–µ–Ω DATABASE_URL, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PostgreSQL
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
```

**‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```
üîÑ –û–±–Ω–∞—Ä—É–∂–µ–Ω DATABASE_URL, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PostgreSQL
‚ö†Ô∏è PostgreSQL –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω: [–æ—à–∏–±–∫–∞]
‚ö†Ô∏è –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ JSON —Ñ–∞–π–ª
```

---

### 3Ô∏è‚É£ –¢–µ—Å—Ç –≤ Discord

1. –í—ã–ø–æ–ª–Ω–∏ –∫–æ–º–∞–Ω–¥—ã:
   ```
   !work
   !balance
   ```

2. –ó–∞–ø–æ–º–Ω–∏ —Å–≤–æ–π –±–∞–ª–∞–Ω—Å

3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞:
   - Railway ‚Üí TTFD ‚Üí Settings ‚Üí **Restart**

4. –ü–æ–¥–æ–∂–¥–∏ 1-2 –º–∏–Ω—É—Ç—ã

5. –°–Ω–æ–≤–∞ –≤—ã–ø–æ–ª–Ω–∏:
   ```
   !balance
   ```

6. **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
   - ‚úÖ –ë–∞–ª–∞–Ω—Å —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è ‚Üí PostgreSQL —Ä–∞–±–æ—Ç–∞–µ—Ç!
   - ‚ùå –ë–∞–ª–∞–Ω—Å = 0 ‚Üí PostgreSQL –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### ‚ùå "DATABASE_URL –Ω–µ –Ω–∞–π–¥–µ–Ω"
**–†–µ—à–µ–Ω–∏–µ:**
1. Railway ‚Üí TTFD (–±–æ—Ç) ‚Üí Variables
2. –ù–∞–∂–º–∏ **"+ New Variable"**
3. –î–æ–±–∞–≤—å:
   - Name: `DATABASE_URL`
   - Value: —Å–∫–æ–ø–∏—Ä—É–π –∏–∑ Postgres ‚Üí Variables ‚Üí DATABASE_URL

---

### ‚ùå "could not translate host name"
**–ü—Ä–∏—á–∏–Ω–∞:** PostgreSQL –±–∞–∑–∞ –µ—â—ë –Ω–µ –≥–æ—Ç–æ–≤–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–æ–¥–æ–∂–¥–∏ 2-3 –º–∏–Ω—É—Ç—ã
2. Railway ‚Üí TTFD ‚Üí Settings ‚Üí Restart

---

### ‚ùå "connection refused"
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π DATABASE_URL

**–†–µ—à–µ–Ω–∏–µ:**
1. –°–∫–æ–ø–∏—Ä—É–π DATABASE_URL –∑–∞–Ω–æ–≤–æ –∏–∑ Postgres ‚Üí Variables
2. –í—Å—Ç–∞–≤—å –≤ TTFD ‚Üí Variables ‚Üí DATABASE_URL
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –±–æ—Ç

---

### ‚ùå "authentication failed"
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å –≤ DATABASE_URL

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–¥–∞–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é DATABASE_URL –∏–∑ –±–æ—Ç–∞
2. –°–∫–æ–ø–∏—Ä—É–π –∑–∞–Ω–æ–≤–æ –∏–∑ Postgres
3. –î–æ–±–∞–≤—å –≤ –±–æ—Ç–∞

---

### ‚ùå "psycopg2 –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
**–ü—Ä–∏—á–∏–Ω–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å `requirements.txt`
2. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `psycopg2-binary==2.9.9`
3. –ï—Å–ª–∏ –Ω–µ—Ç - –¥–æ–±–∞–≤—å –∏ –∑–∞–∫–æ–º–º–∏—Ç—å

---

## –§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

- `–¢–ï–°–¢_POSTGRESQL.bat` - –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç (Windows)
- `test_postgres_connection.py` - —Å–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∞
- `–ö–ê–ö_–ü–†–û–í–ï–†–ò–¢–¨_–ë–ê–ó–£_–î–ê–ù–ù–´–•.txt` - —Ç–µ–∫—Å—Ç–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- `.env` - –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å DATABASE_URL (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞)

---

## –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ PostgreSQL

‚úÖ **–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞**
- –ë–∞–ª–∞–Ω—Å –Ω–µ –ø—Ä–æ–ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –¥–µ–ø–ª–æ–µ
- XP —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- –†–∞–Ω–≥–∏ –æ—Å—Ç–∞—é—Ç—Å—è
- –ò—Å—Ç–æ—Ä–∏—è –∫–æ–º–∞–Ω–¥ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ**
- –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (Railway): PostgreSQL
- –õ–æ–∫–∞–ª—å–Ω–æ (–±–µ–∑ DATABASE_URL): JSON —Ñ–∞–π–ª—ã

‚úÖ **–ù–æ–≤–∞—è –±–∞–∑–∞ –ø—É—Å—Ç–∞—è**
- –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–∞—á–∏–Ω–∞—é—Ç —Å 0
- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –Ω–æ–≤–æ–π –±–∞–∑—ã
- –°—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –±—ã–ª–∏ –≤ JSON —Ñ–∞–π–ª–∞—Ö

---

**–î–∞—Ç–∞:** 07.02.2026  
**–í–µ—Ä—Å–∏—è:** 1.2
