═══════════════════════════════════════════════════════════════
❌ ОШИБКА: 403 Forbidden - Missing Access
═══════════════════════════════════════════════════════════════

🔍 ЧТО СЛУЧИЛОСЬ:
----------------
Ошибка: discord.errors.Forbidden: 403 Forbidden (error code: 50001): Missing Access

Это значит что у бота НЕТ ПРАВ для регистрации slash команд!

═══════════════════════════════════════════════════════════════

🎯 ПРИЧИНА:
----------
Бот был добавлен на сервер БЕЗ scope "applications.commands"

Когда бот приглашался на сервер, не был указан этот scope,
поэтому Discord не дал боту права регистрировать slash команды.

═══════════════════════════════════════════════════════════════

✅ РЕШЕНИЕ:
----------
Нужно ПЕРЕПРИГЛАС��ТЬ бота с правильными правами!

ШАГ 1: Создай правильную ссылку приглашения
-------------------------------------------

1. Открой Discord Developer Portal:
   https://discord.com/developers/applications

2. Выбери приложение "TTFD" (ID: 1441498894008582354)

3. Перейди в раздел "OAuth2" → "URL Generator"

4. Выбери SCOPES:
   ☑ bot
   ☑ applications.commands  ← ВАЖНО!

5. Выбери BOT PERMISSIONS:
   ☑ Administrator (или минимальные права ниже)

6. Скопируй сгенерированную ссылку внизу страницы

ШАГ 2: Перепригласи бота
------------------------

1. Открой скопированную ссылку в браузере

2. Выбери сервер TTFD

3. Нажми "Авторизовать"

4. Подтверди права

5. Бот будет переприглашён с правильными правами

ШАГ 3: Перезапусти бота на Railway
----------------------------------

1. Railway Dashboard → TTFD Discord Bot

2. Settings → Restart

3. Проверь логи - должно быть:
   ✅ Синхронизировано 27 slash команд с Discord (guild sync)

═══════════════════════════════════════════════════════════════

🔗 ГОТОВАЯ ССЫЛКА ПРИГЛАШЕНИЯ:
-----------------------------

https://discord.com/api/oauth2/authorize?client_id=1441498894008582354&permissions=8&scope=bot%20applications.commands

Эта ссылка:
- Client ID: 1441498894008582354 (твой бот)
- Permissions: 8 (Administrator)
- Scope: bot + applications.commands

Просто открой эту ссылку и перепригласи бота!

═══════════════════════════════════════════════════════════════

💡 МИНИМАЛЬНЫЕ ПРАВА (если не хочешь Administrator):
---------------------------------------------------

Если не хочешь давать Administrator, выбери эти права:

☑ Manage Roles (управление ролями)
☑ Manage Channels (управление каналами)
☑ View Channels (просмотр каналов)
☑ Send Messages (отправка сообщений)
☑ Manage Messages (управление сообщениями)
☑ Embed Links (встраивание ссылок)
☑ Attach Files (прикрепление файлов)
☑ Read Message History (чтение истории)
☑ Add Reactions (добавление реакций)
☑ Use Slash Commands (использование slash команд)

Permissions value: 2416045136

Ссылка с минимальными правами:
https://discord.com/api/oauth2/authorize?client_id=1441498894008582354&permissions=2416045136&scope=bot%20applications.commands

═══════════════════════════════════════════════════════════════

🔍 КАК ПРОВЕРИТЬ ЧТО ПРАВА ЕСТЬ:
--------------------------------

После переприглашения:

1. Discord → Настройки сервера → Интеграции

2. Найди бота "TTFD"

3. Должно быть написано:
   "applications.commands" ✅

4. Перезапусти бота на Railway

5. Проверь логи:
   ✅ Синхронизировано 27 slash команд с Discord (guild sync)

6. Проверь команды в Discord:
   Набери "/" → команды должны появиться и работать!

═══════════════════════════════════════════════════════════════

❓ ПОЧЕМУ ЭТО ПРОИЗОШЛО:
-----------------------

Раньше боты добавлялись только с scope "bot".
Slash команды появились позже и требуют scope "applications.commands".

Если бот был добавлен до появления slash команд или без этого scope,
нужно перепригласить бота с правильными правами.

═══════════════════════════════════════════════════════════════

📋 КРАТКАЯ ИНСТРУКЦИЯ:
---------------------

1. Открой ссылку:
   https://discord.com/api/oauth2/authorize?client_id=1441498894008582354&permissions=8&scope=bot%20applications.commands

2. Выбери сервер TTFD

3. Нажми "Авторизовать"

4. Railway → Restart бота

5. Проверь команды в Discord

═══════════════════════════════════════════════════════════════
📅 Дата: 08.02.2026
🎯 Статус: НУЖНО ПЕРЕПРИГЛАСИТЬ БОТА
⏱️ Время: 2 минуты
═══════════════════════════════════════════════════════════════
