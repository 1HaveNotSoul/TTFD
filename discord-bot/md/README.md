# 🎮 TTFD Discord Bot

Discord бот для сервера TTFD с системой рангов, мини-играми и интеграцией с сайтом.

## 🚀 Быстрый старт

### 1. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 2. Настройка

Создай файл `.env` на основе `.env.example`:

```env
DISCORD_TOKEN=твой_токен_бота
GUILD_ID=id_твоего_сервера
```

**Где взять DISCORD_TOKEN:**
1. Открой https://discord.com/developers/applications
2. Выбери своё приложение (или создай новое)
3. Bot → Reset Token → Скопируй токен

**Где взять GUILD_ID:**
1. В Discord: Settings → Advanced → Developer Mode (включи)
2. Правый клик на свой сервер → Copy Server ID

### 3. Запуск

**Вариант 1 (рекомендуется):**
- Двойной клик на `ЗАПУСК_УЛУЧШЕННЫЙ.bat`

**Вариант 2 (через терминал):**
```bash
python main.py
```

## ✨ Возможности

### 🎨 Специальный шрифт Small Capital
- **Красивое отображение**: все сообщения бота в стильном шрифте
- **Поддержка русского и английского**: правильная конвертация букв
- **Эмодзи и символы**: сохраняются без изменений
- **Примеры**: Привет → ᴨᴩиʙᴇᴛ, Hello → ʜᴇʟʟᴏ

### 📋 Система обновлений
- **Автоматические уведомления**: о запуске бота и новых версиях
- **История обновлений**: полный список всех изменений
- **Канал обновлений**: ID `1466923990936326294`
- **Команды для админов**: `!update`, `!majorupdate`, `!version`

### 🔹 Slash-команды (/)
- **Автодополнение**: начни вводить `/` и выбери команду
- **Подсказки**: параметры команд с описанием
- **Современный интерфейс**: выглядит официально

### 📊 Прогресс-бары
- Визуальный прогресс до следующего ранга
- Процент выполнения
- Отображение в профиле

### 🔥 Daily Streak
- Бонусы за ежедневные входы
- Каждые 7 дней: +50 XP, +25 монет
- Отслеживание серии

### 🎮 Мини-игры
- **Dice**: бросок кубика (1-6) → +5 XP
- **Coinflip**: угадай сторону → выигрыш: +25 монет

### 🎨 Красивые Embed'ы
- Цветные блоки по рангу
- Иконки и эмодзи
- Thumbnails с аватарами

## 📋 Команды

### Основные
- `/ping` или `!ping` - проверка задержки
- `/stats` или `!stats` - статистика бота
- `/link` или `!link` - ссылка на сайт
- `/cat` или `!slut` - случайное фото котика 🐱

### Профиль и игра
- `/profile [@user]` или `!profile` - профиль с прогресс-баром
- `/rank` или `!rank` - твой текущий ранг
- `/top` или `!top` - таблица лидеров
- `/daily` или `!daily` - ежедневная награда (с бонусом за серию!)

### 🎮 Мини-игры
- `/dice` - бросить кубик (1-6) → +5 XP
- `/coinflip [выбор]` - подбросить монетку → выигрыш: +25 монет

### Поддержка
- `/ticket` или `!ticket` - создать тикет
- `/close` или `!close` - закрыть тикет

### Модерация
- `/clear [число]` или `!clear` - очистить сообщения (только для модераторов)

### Администрирование
- `!update <изменения>` - отправить минорное обновление (1.0 → 1.1)
- `!majorupdate <изменения>` - отправить мажорное обновление (1.0 → 2.0)
- `!version` - показать текущую версию и историю
- `!announce <сообщение>` - отправить объявление в канал обновлений
- `!updatelist` - обновить список обновлений в канале

## 🏆 Система рангов

20 уникальных рангов от "Пустой взгляд" до "Абсолютный гуль":
- Получай XP за активность (1 XP за сообщение)
- Повышай ранг автоматически
- Получай награды в монетах
- Отслеживай прогресс с прогресс-барами

## 🔥 Daily Streak

Заходи каждый день и получай бонусы:
- **7 дней**: +50 XP, +25 монет
- **14 дней**: +100 XP, +50 монет
- **21 день**: +150 XP, +75 монет
- И так далее...

Пропустил день? Серия сбрасывается!

## 🎯 Мини-игры

### 🎲 Кубик
```
/dice
```
- Бросок 1-6
- +5 XP за игру

### 🪙 Монетка
```
/coinflip [Орёл/Решка]
```
- Угадай сторону
- **Выигрыш**: +25 монет, +10 XP
- **Проигрыш**: +5 XP

## 📊 База данных

Используется JSON база данных:
- `user_data.json` - данные пользователей
- `accounts.json` - аккаунты для сайта

Данные синхронизируются между ботом и сайтом.

## 🔧 Файлы проекта

### Основные файлы
- `bot.py` - основной файл бота со всеми функциями
- `database.py` - работа с базой данных
- `config.py` - конфигурация
- `main.py` - точка входа
- `font_converter.py` - конвертер шрифта Small Capital
- `updates_system.py` - система уведомлений об обновлениях
- `version.json` - информация о версии и история изменений
- `ЗАПУСК_УЛУЧШЕННЫЙ.bat` - быстрый запуск

### Документация
- `README.md` - этот файл
- `БЫСТРЫЙ_СТАРТ.md` - краткая шпаргалка
- `ПРИМЕРЫ.md` - примеры использования
- `ТЕСТИРОВАНИЕ.md` - чек-лист тестирования
- `КАК_ИСПОЛЬЗОВАТЬ_ШРИФТ.md` - инструкция по шрифту
- `ИНСТРУКЦИЯ_ОБНОВЛЕНИЯ.md` - инструкция по системе обновлений
- `ИСПРАВЛЕНИЯ_31_01_2026.md` - последние исправления
- `CHANGELOG.md` - история изменений

## 🌐 Интеграция с сайтом

Бот интегрирован с сайтом TTFD:
- Синхронизация рангов
- Общая база пользователей
- Ссылки на игры (кликер, змейка)

## 📖 Дополнительная документация

- `БЫСТРЫЙ_СТАРТ.md` - краткая шпаргалка
- `ПРИМЕРЫ.md` - примеры использования
- `ТЕСТИРОВАНИЕ.md` - чек-лист тестирования
- `CHANGELOG.md` - история изменений

## 🛠️ Настройка Discord Developer Portal

### 1. Создай приложение:
- https://discord.com/developers/applications
- New Application → Введи имя

### 2. Создай бота:
- Bot → Add Bot
- Reset Token → Скопируй токен в `.env`

### 3. Включи Intents:
- Bot → Privileged Gateway Intents:
  - ✅ Message Content Intent
  - ✅ Server Members Intent
  - ✅ Presence Intent

### 4. Пригласи бота на сервер:
- OAuth2 → URL Generator
- Scopes: `bot`, `applications.commands`
- Bot Permissions: `Administrator` (или выбери нужные)
- Скопируй ссылку и открой в браузере

## 🐛 Troubleshooting

### Бот не запускается:
- Проверь что `DISCORD_TOKEN` правильный
- Проверь что установлены все зависимости: `pip install -r requirements.txt`
- Проверь версию Python: `python --version` (требуется 3.12+)

### Бот не отвечает на команды:
- Проверь что Message Content Intent включен в Developer Portal
- Проверь права бота на сервере
- Для slash-команд: перезапусти Discord клиент

### Slash-команды не появляются:
- Подожди 5-10 минут после запуска бота
- Перезапусти Discord клиент
- Проверь что scope `applications.commands` включен при приглашении

### Ошибка "429 Too Many Requests":
- Discord rate limit - слишком частые подключения
- Подожди 30-60 минут и попробуй снова

## 🎁 Что нового в версии 2.0

### Новые функции
- ✨ 11 slash-команд с автодополнением
- 🎮 2 мини-игры (dice, coinflip)
- 📊 Прогресс-бары в профиле
- 🔥 Daily streak система с бонусами
- 🎨 Красивые embed'ы с цветами
- 📚 Полная документация

### Исправления от 31.01.2026
- ✅ **Шрифт Small Capital**: правильная конвертация русских и английских букв
- ✅ **Система обновлений**: автоматическое создание списка обновлений в канале
- ✅ **Уведомления**: о запуске бота и новых версиях
- ✅ **Команды для админов**: управление обновлениями и объявлениями

Подробнее: `ИСПРАВЛЕНИЯ_31_01_2026.md`

## 📜 Лицензия

MIT License

---

**Последнее обновление:** 31.01.2026
**Версия:** 2.0.0
