# ‚úÖ –ì–û–¢–û–í–û: –®–∞–≥ 2.1 - –°–∏—Å—Ç–µ–º–∞ —Å–µ–∑–æ–Ω–æ–≤

**–î–∞—Ç–∞:** 08.02.2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ  
**–í–µ—Ä—Å–∏—è:** v3.0 + –°–µ–∑–æ–Ω—ã

---

## üéØ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ú–æ–¥–µ–ª–∏ —Å–µ–∑–æ–Ω–æ–≤ ‚úÖ
**–§–∞–π–ª:** `domain/models/season.py`

**–°–æ–∑–¥–∞–Ω—ã –º–æ–¥–µ–ª–∏:**
- `Season` - –º–æ–¥–µ–ª—å —Å–µ–∑–æ–Ω–∞ (30 –¥–Ω–µ–π)
- `SeasonProgress` - –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–µ–∑–æ–Ω–µ
- `SeasonReward` - –Ω–∞–≥—Ä–∞–¥—ã –∑–∞ –ø–æ–∑–∏—Ü–∏–∏
- `DEFAULT_SEASON_REWARDS` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞–≥—Ä–∞–¥

**–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è:**
```python
Season:
  - number: –Ω–æ–º–µ—Ä —Å–µ–∑–æ–Ω–∞
  - name: –Ω–∞–∑–≤–∞–Ω–∏–µ
  - start_date, end_date: –¥–∞—Ç—ã
  - status: active/ended/upcoming
  - rewards_config: JSON —Å –Ω–∞–≥—Ä–∞–¥–∞–º–∏

SeasonProgress:
  - season_xp, season_coins: —Å–µ–∑–æ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  - games_played, games_won: –∏–≥—Ä–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  - current_streak, best_streak: —Å—Ç—Ä–∏–∫–∏
  - rank: –ø–æ–∑–∏—Ü–∏—è –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ
  - rewards_claimed: –ø–æ–ª—É—á–µ–Ω—ã –ª–∏ –Ω–∞–≥—Ä–∞–¥—ã
```

---

### 2. –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î ‚úÖ
**–§–∞–π–ª:** `infrastructure/database/migrations/003_seasons.sql`

**–°–æ–∑–¥–∞–Ω—ã —Ç–∞–±–ª–∏—Ü—ã:**
- `seasons` - —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ–∑–æ–Ω–æ–≤
- `season_progress` - –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `updated_at`
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- Constraint –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞—Ç
- –ü–µ—Ä–≤—ã–π —Å–µ–∑–æ–Ω —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
```bash
psql -U postgres -d ttfd_bot -f infrastructure/database/migrations/003_seasons.sql
```

---

### 3. –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–µ–∑–æ–Ω–æ–≤ ‚úÖ
**–§–∞–π–ª:** `infrastructure/database/repositories/season_repository.py`

**–ú–µ—Ç–æ–¥—ã:**
- `get_active_season()` - –ø–æ–ª—É—á–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π —Å–µ–∑–æ–Ω
- `create_season()` - —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–µ–∑–æ–Ω
- `get_or_create_progress()` - –ø–æ–ª—É—á–∏—Ç—å/—Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
- `update_progress()` - –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å (XP, –º–æ–Ω–µ—Ç—ã, –∏–≥—Ä—ã, —Å—Ç—Ä–∏–∫–∏)
- `get_season_leaderboard()` - –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–π—Ç–∏–Ω–≥
- `update_ranks()` - –æ–±–Ω–æ–≤–∏—Ç—å —Ä–∞–Ω–≥–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `mark_rewards_claimed()` - –æ—Ç–º–µ—Ç–∏—Ç—å –≤—ã–¥–∞—á—É –Ω–∞–≥—Ä–∞–¥

---

### 4. –°–µ—Ä–≤–∏—Å —Å–µ–∑–æ–Ω–æ–≤ ‚úÖ
**–§–∞–π–ª:** `domain/services/season_service.py`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∑–æ–Ω–∞–º–∏:
- `get_or_create_active_season()` - –ø–æ–ª—É—á–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π
- `check_season_end()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å–µ–∑–æ–Ω–∞
- `_end_season()` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ–∑–æ–Ω–∞ –∏ –≤—ã–¥–∞—á–∞ –Ω–∞–≥—Ä–∞–¥

#### –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
- `get_user_progress()` - –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
- `add_season_xp()` - –¥–æ–±–∞–≤–∏—Ç—å XP/–º–æ–Ω–µ—Ç—ã –ø–æ—Å–ª–µ –∏–≥—Ä—ã
- `_update_streak()` - –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

#### –†–µ–π—Ç–∏–Ω–≥:
- `get_season_leaderboard()` - –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–ø –∏–≥—Ä–æ–∫–æ–≤
- `update_all_ranks()` - –æ–±–Ω–æ–≤–∏—Ç—å —Ä–∞–Ω–≥–∏ (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —á–∞—Å)

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- `get_season_stats()` - –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ–∑–æ–Ω–∞

**–õ–æ–≥–∏–∫–∞ —Å—Ç—Ä–∏–∫–æ–≤:**
- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–µ–≥–æ–¥–Ω—è ‚Üí —Å—Ç—Ä–∏–∫ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è
- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤—á–µ—Ä–∞ ‚Üí —Å—Ç—Ä–∏–∫ +1
- –ü—Ä–æ–ø—É—â–µ–Ω –¥–µ–Ω—å ‚Üí —Å—Ç—Ä–∏–∫ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –¥–æ 1

---

### 5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–≥—Ä–∞–º–∏ ‚úÖ
**–§–∞–π–ª:** `domain/services/game_service.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω `season_service` –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –∏–≥—Ä—ã –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `season_service.add_season_xp()`
- –ü–µ—Ä–µ–¥–∞—é—Ç—Å—è: XP, –º–æ–Ω–µ—Ç—ã, —Ñ–∞–∫—Ç –∏–≥—Ä—ã, —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
```python
# –í check_guess, check_quiz_answer, spin_wheel:
if self.season_service:
    await self.season_service.add_season_xp(
        user_id=user.id,
        xp=reward_xp,
        coins=reward_coins,
        game_played=True,
        game_won=won
    )
```

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–Ω–µ –ª–æ–º–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥)
- –ï—Å–ª–∏ `season_service=None` - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ

---

### 6. Handlers –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ ‚úÖ
**–§–∞–π–ª:** `application/handlers/season/season_handler.py`

**–ú–µ—Ç–æ–¥—ã:**
- `handle_season_info()` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ–∑–æ–Ω–µ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ
- `handle_leaderboard()` - —Ä–µ–π—Ç–∏–Ω–≥ —Ç–æ–ø-20
- `handle_rewards()` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–∞–≥—Ä–∞–¥–∞—Ö

**–ö–æ–º–∞–Ω–¥–∞:** `/season`

**Callback:**
- `season_info` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- `season_leaderboard` - —Ä–µ–π—Ç–∏–Ω–≥
- `season_rewards` - –Ω–∞–≥—Ä–∞–¥—ã

---

### 7. –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ ‚úÖ
**–§–∞–π–ª:** `main_v3.py`

**–î–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–¥–∞—á–∏:**

#### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å–µ–∑–æ–Ω–∞ (–∫–∞–∂–¥—ã–π —á–∞—Å):
```python
async def check_season():
    await season_service.check_season_end()
    await season_service.update_all_ranks()
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–µ –∏—Å—Ç—ë–∫ –ª–∏ —Å–µ–∑–æ–Ω
- –ï—Å–ª–∏ –∏—Å—Ç—ë–∫ - –∑–∞–≤–µ—Ä—à–∞–µ—Ç –∏ –≤—ã–¥–∞—ë—Ç –Ω–∞–≥—Ä–∞–¥—ã
- –û–±–Ω–æ–≤–ª—è–µ—Ç —Ä–∞–Ω–≥–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### 2. –û—á–∏—Å—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç):
```python
async def cleanup_states():
    state_manager.cleanup_expired()
```

---

## üìä –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Å–µ–∑–æ–Ω–∞:

1. **–°–æ–∑–¥–∞–Ω–∏–µ:**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
   - –ò–ª–∏ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ
   - –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 30 –¥–Ω–µ–π

2. **–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–≥—Ä–∞—é—Ç –≤ –∏–≥—Ä—ã
   - –ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç —Å–µ–∑–æ–Ω–Ω—ã–π XP/–º–æ–Ω–µ—Ç—ã
   - –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Å—Ç—Ä–∏–∫–∏
   - –ö–∞–∂–¥—ã–π —á–∞—Å –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Ä–∞–Ω–≥–∏

3. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ:**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–π —á–∞—Å
   - –§–∏–Ω–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–Ω–≥–æ–≤
   - –í—ã–¥–∞—á–∞ –Ω–∞–≥—Ä–∞–¥ —Ç–æ–ø-50
   - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–µ–∑–æ–Ω–∞

### –ù–∞–≥—Ä–∞–¥—ã:

| –ú–µ—Å—Ç–æ | XP | –ú–æ–Ω–µ—Ç—ã | Discord —Ä–æ–ª—å | –¢–∏—Ç—É–ª |
|-------|-----|---------|--------------|-------|
| 1 | 5000 | 1000 | season_champion | üèÜ –ß–µ–º–ø–∏–æ–Ω |
| 2-3 | 3000 | 500 | season_top3 | ü•à –¢–æ–ø-3 |
| 4-10 | 2000 | 300 | season_top10 | ü•â –¢–æ–ø-10 |
| 11-50 | 1000 | 150 | - | ‚≠ê –¢–æ–ø-50 |

---

## üöÄ –ó–∞–ø—É—Å–∫

### 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é:
```bash
cd TTFD/telegram-bot
psql -U postgres -d ttfd_bot -f infrastructure/database/migrations/003_seasons.sql
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞:
```bash
python main_v3.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
============================================================
üöÄ –ó–∞–ø—É—Å–∫ TTFD Telegram Bot v3.0 (Clean Architecture)
============================================================

üì° –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL...
üì° –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis...
üîß –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è repositories...
üîß –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è services...
üîß –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è handlers...
üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è handlers...
üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è callback router...
üßπ –ó–∞–ø—É—Å–∫ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á...

============================================================
‚úÖ TTFD Bot v3.0 –∑–∞–ø—É—â–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!
   ‚Ä¢ Clean Architecture
   ‚Ä¢ PostgreSQL
   ‚Ä¢ Redis Cache
   ‚Ä¢ Domain-Driven Design
   ‚Ä¢ Role-Based Access Control (RBAC)
   ‚Ä¢ Centralized Callback Router
   ‚Ä¢ State Manager with TTL
   ‚Ä¢ Season System (30 days)
============================================================

üí° –û—Ç–ø—Ä–∞–≤—å /start, /games –∏–ª–∏ /season –±–æ—Ç—É –≤ Telegram
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–µ–∑–æ–Ω–∞:
```
/season
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
- –ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ–∑–æ–Ω–∞
- –î–Ω–µ–π –æ—Å—Ç–∞–ª–æ—Å—å
- –¢–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å (XP, –º–æ–Ω–µ—Ç—ã, –∏–≥—Ä—ã, —Å—Ç—Ä–∏–∫–∏)
- –¢–≤–æ—è –ø–æ–∑–∏—Ü–∏—è –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ
- –ö–Ω–æ–ø–∫–∏: –†–µ–π—Ç–∏–Ω–≥, –ù–∞–≥—Ä–∞–¥—ã

### 2. –†–µ–π—Ç–∏–Ω–≥:
```
/season ‚Üí üèÜ –†–µ–π—Ç–∏–Ω–≥ —Å–µ–∑–æ–Ω–∞
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
- –¢–æ–ø-20 –∏–≥—Ä–æ–∫–æ–≤
- –¢–≤–æ—è –ø–æ–∑–∏—Ü–∏—è (–µ—Å–ª–∏ –Ω–µ –≤ —Ç–æ–ø-20)
- –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Ç–≤–æ–µ–π –ø–æ–∑–∏—Ü–∏–∏

### 3. –ò–≥—Ä–∞ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å:
```
1. /games ‚Üí —Å—ã–≥—Ä–∞—Ç—å –∏–≥—Ä—É
2. /season ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ season_xp
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ games_played
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∏–∫–∞ (–µ—Å–ª–∏ –Ω–æ–≤—ã–π –¥–µ–Ω—å)

### 4. –°—Ç—Ä–∏–∫–∏:
```
–î–µ–Ω—å 1: /games ‚Üí —Å—ã–≥—Ä–∞—Ç—å
–î–µ–Ω—å 2: /games ‚Üí —Å—ã–≥—Ä–∞—Ç—å (—Å—Ç—Ä–∏–∫ +1)
–î–µ–Ω—å 4: /games ‚Üí —Å—ã–≥—Ä–∞—Ç—å (—Å—Ç—Ä–∏–∫ —Å–±—Ä–æ—à–µ–Ω)
```

---

## üîç –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–æ—á–µ–º—É –±–µ–∑–æ–ø–∞—Å–Ω–æ:

1. **–ù–µ –ª–æ–º–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥:**
   - `season_service` –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω –≤ `GameService`
   - –ï—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
   - –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î

2. **–†–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö:**
   - –ù–µ –º–µ–Ω—è–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π XP/–º–æ–Ω–µ—Ç—ã
   - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
   - –ú–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –±–µ–∑ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–π

3. **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞:**
   - –í—Å—è –ª–æ–≥–∏–∫–∞ –≤ `SeasonService`
   - –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ –º–æ–¥—É–ª–∏
   - –õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å

### Edge cases:

1. **–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–µ–∑–æ–Ω–∞:**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤—ã–π
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–∏–¥–∏—Ç –æ—à–∏–±–æ–∫

2. **–°–µ–∑–æ–Ω –∑–∞–∫–æ–Ω—á–∏–ª—Å—è –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã:**
   - –ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Å—Ç–∞—Ä—ã–π —Å–µ–∑–æ–Ω
   - –ù–æ–≤—ã–π —Å–µ–∑–æ–Ω —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –ø—Ä–æ–≤–µ—Ä–∫–µ

3. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∏–≥—Ä–∞–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π:**
   - –°—Ç—Ä–∏–∫ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è
   - –õ—É—á—à–∏–π —Å—Ç—Ä–∏–∫ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

4. **–û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ–∑–æ–Ω–∞:**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–π —á–∞—Å
   - –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ –ë–î

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏

### –î–æ:
- ‚ùå –ù–µ—Ç –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –º–æ—Ç–∏–≤–∞—Ü–∏–∏
- ‚ùå –ù–µ—Ç —Å–æ—Ä–µ–≤–Ω–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚ùå –ù–µ—Ç –Ω–∞–≥—Ä–∞–¥ –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

### –ü–æ—Å–ª–µ:
- ‚úÖ –°–µ–∑–æ–Ω—ã –ø–æ 30 –¥–Ω–µ–π
- ‚úÖ –†–µ–π—Ç–∏–Ω–≥ –∏ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ù–∞–≥—Ä–∞–¥—ã –∑–∞ —Ç–æ–ø –ø–æ–∑–∏—Ü–∏–∏
- ‚úÖ –°—Ç—Ä–∏–∫–∏ –∑–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- ‚úÖ –û—Ç–¥–µ–ª—å–Ω–∞—è —Å–µ–∑–æ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

---

## üéØ –ß—Ç–æ –¥–∞–ª—å—à–µ

### –≠—Ç–∞–ø 2.2: –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è (Achievements)
- –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –∑–∞ –∏–≥—Ä—ã, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, —Å—Ç—Ä–∏–∫–∏
- –ù–∞–≥—Ä–∞–¥—ã (XP, –º–æ–Ω–µ—Ç—ã, Discord —Ä–æ–ª–∏)
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –ø—Ä–æ—Ñ–∏–ª–µ

### –≠—Ç–∞–ø 2.3: –£–ª—É—á—à–µ–Ω–∏–µ –∏–≥—Ä–æ–≤–æ–π –º–µ—Ç—ã
- –ö—É–ª–¥–∞—É–Ω—ã –¥–ª—è –∏–≥—Ä
- –ë–æ–Ω—É—Å—ã –∑–∞ —Å—Ç—Ä–∏–∫–∏
- –°–µ–∑–æ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

### –≠—Ç–∞–ø 2.4: Discord –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –ü—Ä–∏–≤—è–∑–∫–∞ Telegram ‚Üî Discord
- –í—ã–¥–∞—á–∞ —Ä–æ–ª–µ–π –∑–∞ —Å–µ–∑–æ–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–∞–≥—Ä–∞–¥

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç

- [x] –ú–æ–¥–µ–ª–∏ —Å–µ–∑–æ–Ω–æ–≤
- [x] –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î
- [x] –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- [x] –°–µ—Ä–≤–∏—Å —Å–µ–∑–æ–Ω–æ–≤
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–≥—Ä–∞–º–∏
- [x] Handlers –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- [x] –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
- [x] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ main_v3.py
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Telegram

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É  
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
