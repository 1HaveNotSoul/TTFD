# ‚úÖ –≠—Ç–∞–ø 3 –∑–∞–≤–µ—Ä—à—ë–Ω - –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π –∏ –ø—Ä–∞–≤

## –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

### üîê –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ (RBAC)
- **27 –ø—Ä–∞–≤** (Permission enum)
- **5 —Ä–æ–ª–µ–π** (Role enum): USER, VIP, MODERATOR, ADMIN, OWNER
- **–ú–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–∞–≤** - –∫–∞–∂–¥–∞—è —Ä–æ–ª—å –Ω–∞—Å–ª–µ–¥—É–µ—Ç –ø—Ä–∞–≤–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–π
- **–î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤:
  - `@require_permission(Permission.MANAGE_USERS)`
  - `@require_role(Role.ADMIN)`

### üîß –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (4 –∫–æ–º–∞–Ω–¥—ã)
- `/admin` - –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- `/admin_stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- `/setrole <id> <role>` - –∏–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `/broadcast <—Ç–µ–∫—Å—Ç>` - —Ä–∞—Å—Å—ã–ª–∫–∞ –≤—Å–µ–º

### üìÅ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã
```
domain/models/permission.py          # Permission, Role, –º–∞—Ç—Ä–∏—Ü–∞
domain/services/permission_service.py # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
application/handlers/admin/admin_handler.py # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
```

## –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å
```bash
cd TTFD/telegram-bot
python main_v3.py
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç
```
/admin
# –î–æ–ª–∂–Ω–æ: ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤
```

### 3. –ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å –Ω–∞ admin
```sql
UPDATE users SET role = 'admin' WHERE telegram_id = '—Ç–≤–æ–π_id';
```

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—ã
```
/admin          # ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
/admin_stats    # ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
/setrole 123 vip # ‚úÖ –†–æ–ª—å –∏–∑–º–µ–Ω–µ–Ω–∞
/broadcast –ü—Ä–∏–≤–µ—Ç! # ‚úÖ –†–∞—Å—Å—ã–ª–∫–∞
```

## –ü—Ä–æ–≥—Ä–µ—Å—Å

**–ó–∞–≤–µ—Ä—à–µ–Ω–æ:** 3 –∏–∑ 5 —ç—Ç–∞–ø–æ–≤ (60%)

‚úÖ –≠—Ç–∞–ø 1: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ + PostgreSQL  
‚úÖ –≠—Ç–∞–ø 2: –ö–æ–º–∞–Ω–¥—ã + –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ  
‚úÖ –≠—Ç–∞–ø 3: –†–æ–ª–∏ + Permissions  
‚è≥ –≠—Ç–∞–ø 4: –ò–≥—Ä—ã + –¢–∏–∫–µ—Ç—ã  
‚è≥ –≠—Ç–∞–ø 5: AI + –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è  

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `–ì–û–¢–û–í–û_v3.0_–≠–¢–ê–ü_3.md` - –ø–æ–ª–Ω–∞—è —Å–≤–æ–¥–∫–∞ —ç—Ç–∞–ø–∞ 3
- `–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï_–ü–†–ê–í_v3.0.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- `–ü–†–û–ì–†–ï–°–°_v3.0.md` - –æ–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å

## –°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø

**–≠—Ç–∞–ø 4: –ò–≥—Ä—ã + –¢–∏–∫–µ—Ç—ã**
- –ü–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–≥—Ä—ã (guess, quiz, spin)
- –ü–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —Ç–∏–∫–µ—Ç–æ–≤
- FSM –¥–ª—è —Ç–∏–∫–µ—Ç–æ–≤
- –ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä

---

**–ì–æ—Ç–æ–≤ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å?** –°–∫–∞–∂–∏ "–ü—Ä–æ–¥–æ–ª–∂–∞–π" –¥–ª—è –Ω–∞—á–∞–ª–∞ –≠—Ç–∞–ø–∞ 4.
