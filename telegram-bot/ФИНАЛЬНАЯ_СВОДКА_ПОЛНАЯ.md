# ‚úÖ –§–ò–ù–ê–õ–¨–ù–ê–Ø –°–í–û–î–ö–ê: –ü–æ–ª–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ v3.0

**–î–∞—Ç–∞:** 08.02.2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–ï–ù–û  
**–í–µ—Ä—Å–∏—è:** v3.0 + –ò–≥—Ä–æ–≤–∞—è –º–µ—Ç–∞ + Discord –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

---

## üéâ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### –≠—Ç–∞–ø 1: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã ‚úÖ
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `–ì–û–¢–û–í–û_–†–ï–§–ê–ö–¢–û–†–ò–ù–ì_–®–ê–ì_1_–§–ò–ù–ê–õ.md`

- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ callback (`core/callbacks.py`)
- ‚úÖ State Manager —Å TTL (`core/state_manager.py`)
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ä–æ—É—Ç–µ—Ä (`application/router.py`)
- ‚úÖ –î–æ–º–µ–Ω–Ω—ã–µ —Ä–æ—É—Ç–µ—Ä—ã (–∏–≥—Ä—ã, —Ç–∏–∫–µ—Ç—ã, –∞–¥–º–∏–Ω–∫–∞)
- ‚úÖ –£–±—Ä–∞–Ω `context.user_data` –∏ `ConversationHandler`
- ‚úÖ –§–æ–Ω–æ–≤–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç callback, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏.

---

### –≠—Ç–∞–ø 2.1: –°–∏—Å—Ç–µ–º–∞ —Å–µ–∑–æ–Ω–æ–≤ ‚úÖ
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `–ì–û–¢–û–í–û_–®–ê–ì_2.1_–°–ï–ó–û–ù–´.md`

- ‚úÖ –°–µ–∑–æ–Ω—ã –ø–æ 30 –¥–Ω–µ–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º
- ‚úÖ –û—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ–∑–æ–Ω–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ (XP, –º–æ–Ω–µ—Ç—ã, –∏–≥—Ä—ã)
- ‚úÖ –°—Ç—Ä–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–¥–µ–Ω—å –ø–æ–¥—Ä—è–¥ +1, –ø—Ä–æ–ø—É—Å–∫ = —Å–±—Ä–æ—Å)
- ‚úÖ –ù–∞–≥—Ä–∞–¥—ã –¥–ª—è —Ç–æ–ø-50 –∏–≥—Ä–æ–∫–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–µ–∑–æ–Ω–∞
- ‚úÖ –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ (–ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–Ω–≥–æ–≤)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –º–æ—Ç–∏–≤–∞—Ü–∏—è, —Å–æ—Ä–µ–≤–Ω–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.

---

### –≠—Ç–∞–ø 2.2: –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π ‚úÖ
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `–ì–û–¢–û–í–û_–®–ê–ì_2.2_–î–û–°–¢–ò–ñ–ï–ù–ò–Ø.md`

- ‚úÖ 20 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –≤ 6 –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤—ã–¥–∞—á–∞ –Ω–∞–≥—Ä–∞–¥ (XP, –º–æ–Ω–µ—Ç—ã, Discord —Ä–æ–ª–∏)
- ‚úÖ 4 —É—Ä–æ–≤–Ω—è —Ä–µ–¥–∫–æ—Å—Ç–∏ (–æ–±—ã—á–Ω–æ–µ, —Ä–µ–¥–∫–æ–µ, —ç–ø–∏—á–µ—Å–∫–æ–µ, –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ)
- ‚úÖ –°–∫—Ä—ã—Ç—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–≥—Ä–∞–º–∏, —Å–µ–∑–æ–Ω–∞–º–∏, —Å—Ç—Ä–∏–∫–∞–º–∏

**–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:**
- üéÆ –ò–≥—Ä—ã (5 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π)
- ‚ö° –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (4 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è)
- üî• –°—Ç—Ä–∏–∫–∏ (3 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è)
- üé´ –¢–∏–∫–µ—Ç—ã (2 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è)
- üèÜ –°–µ–∑–æ–Ω—ã (4 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è)
- üåü –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ (2 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, —Å–∫—Ä—ã—Ç—ã–µ)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ —Ü–µ–ª–∏, –Ω–∞–≥—Ä–∞–¥—ã –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∫–∞–∂–¥–æ–º—É –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—é.

---

### –≠—Ç–∞–ø 2.3: Discord –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ‚úÖ
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `–ì–û–¢–û–í–û_–®–ê–ì_2.3_DISCORD.md`

- ‚úÖ –ü—Ä–∏–≤—è–∑–∫–∞ Telegram ‚Üî Discord —á–µ—Ä–µ–∑ 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤—ã–¥–∞—á–∞ 11 Discord —Ä–æ–ª–µ–π
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –û—á–µ—Ä–µ–¥—å —Ä–æ–ª–µ–π –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö API
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π
- ‚úÖ –§–æ–Ω–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)

**–†–æ–ª–∏:**
- –ó–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è (9 —Ä–æ–ª–µ–π)
- –ó–∞ —Å–µ–∑–æ–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (2 —Ä–æ–ª–∏)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è, –º–æ—Ç–∏–≤–∞—Ü–∏—è –¥–ª—è Discord –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –ø—Ä–µ—Å—Ç–∏–∂.

---

### –ë–æ–Ω—É—Å: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ v2.1 ‚úÖ
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `–ò–°–ü–†–ê–í–õ–ï–ù–ê_–û–®–ò–ë–ö–ê_v2.1.md`

- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ `Database.update_user()` –≤ —Å—Ç–∞—Ä–æ–º –±–æ—Ç–µ
- ‚úÖ –£–±—Ä–∞–Ω –¥—É–±–ª–∏—Ä—É—é—â–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç `telegram_id`

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- **–ú–æ–¥–µ–ª–∏:** 4 —Ñ–∞–π–ª–∞ (user, game, season, achievement, discord_link)
- **–ú–∏–≥—Ä–∞—Ü–∏–∏:** 5 —Ñ–∞–π–ª–æ–≤ (001-005)
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:** 6 —Ñ–∞–π–ª–æ–≤
- **–°–µ—Ä–≤–∏—Å—ã:** 7 —Ñ–∞–π–ª–æ–≤
- **Handlers:** 10 —Ñ–∞–π–ª–æ–≤
- **–†–æ—É—Ç–µ—Ä—ã:** 4 —Ñ–∞–π–ª–∞
- **Core:** 3 —Ñ–∞–π–ª–∞ (callbacks, state_manager, config)
- **External:** 2 —Ñ–∞–π–ª–∞ (ai_service, discord_client)
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** 15+ —Ñ–∞–π–ª–æ–≤

**–ò—Ç–æ–≥–æ:** ~60 —Ñ–∞–π–ª–æ–≤

### –°—Ç—Ä–æ–∫ –∫–æ–¥–∞:
- **–ú–æ–¥–µ–ª–∏:** ~800 —Å—Ç—Ä–æ–∫
- **–ú–∏–≥—Ä–∞—Ü–∏–∏:** ~500 —Å—Ç—Ä–æ–∫
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:** ~2000 —Å—Ç—Ä–æ–∫
- **–°–µ—Ä–≤–∏—Å—ã:** ~2500 —Å—Ç—Ä–æ–∫
- **Handlers:** ~2000 —Å—Ç—Ä–æ–∫
- **Core:** ~800 —Å—Ç—Ä–æ–∫
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** ~5000 —Å—Ç—Ä–æ–∫

**–ò—Ç–æ–≥–æ:** ~13600 —Å—Ç—Ä–æ–∫

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- **–ö–æ–º–∞–Ω–¥—ã:** 10 –∫–æ–º–∞–Ω–¥ (/start, /profile, /daily, /games, /season, /achievements, /discord, /tickets, /leaderboard, /admin)
- **Callback:** 40+ callback
- **–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è:** 20 —à—Ç—É–∫
- **Discord —Ä–æ–ª–∏:** 11 —à—Ç—É–∫
- **–§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏:** 3 –∑–∞–¥–∞—á–∏
- **–ú–∏–≥—Ä–∞—Ü–∏–∏:** 5 –º–∏–≥—Ä–∞—Ü–∏–π

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Clean Architecture (4 —Å–ª–æ—è):

1. **Domain** (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞):
   - Models (user, game, season, achievement, discord_link)
   - Services (user, game, season, achievement, discord, ticket, permission)

2. **Application** (–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏):
   - Handlers (user, game, season, achievement, discord, ticket, admin)
   - Routers (game, ticket, admin, callback)
   - Jobs (scheduler)

3. **Infrastructure** (–≤–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏):
   - Database (repositories, migrations, connection)
   - Cache (redis, memory)
   - External (discord_client, ai_service)

4. **Core** (–æ–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã):
   - Config, Callbacks, State Manager, Exceptions

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤:
```
UserService
    ‚Üì
DiscordService
    ‚Üì
AchievementService
    ‚Üì
SeasonService
    ‚Üì
GameService
```

---

## üöÄ –ó–∞–ø—É—Å–∫

### 1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env:
```bash
# Telegram
TELEGRAM_BOT_TOKEN=your_token
TELEGRAM_ADMIN_IDS=123456,789012

# Database
DATABASE_URL=postgresql://user:pass@host:5432/db

# Redis (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
REDIS_URL=redis://localhost:6379

# Discord (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
DISCORD_BOT_TOKEN=your_discord_token
DISCORD_GUILD_ID=your_guild_id
```

### 2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏:
```bash
cd TTFD/telegram-bot

psql -U postgres -d ttfd_bot -f infrastructure/database/migrations/001_initial_schema.sql
psql -U postgres -d ttfd_bot -f infrastructure/database/migrations/002_update_game_history.sql
psql -U postgres -d ttfd_bot -f infrastructure/database/migrations/003_seasons.sql
psql -U postgres -d ttfd_bot -f infrastructure/database/migrations/004_achievements.sql
psql -U postgres -d ttfd_bot -f infrastructure/database/migrations/005_discord_integration.sql
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞:
```bash
python main_v3.py
```

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Telegram:
```
/start
/profile
/games
/season
/achievements
/discord
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:

1. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
   - `–ê–†–•–ò–¢–ï–ö–¢–£–†–ê_v3.0_–°–•–ï–ú–ê.md` - —Å—Ö–µ–º–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
   - `–ë–´–°–¢–†–´–ô_–°–¢–ê–†–¢_v3.0.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
   - `–ó–ê–ü–£–°–ö_v3.0.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞

2. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥:**
   - `–ì–û–¢–û–í–û_–†–ï–§–ê–ö–¢–û–†–ò–ù–ì_–®–ê–ì_1_–§–ò–ù–ê–õ.md` - –ø–æ–ª–Ω–∞—è —Å–≤–æ–¥–∫–∞
   - `–ì–û–¢–û–í–û_–†–ï–§–ê–ö–¢–û–†–ò–ù–ì_–®–ê–ì_1.1_–ò–ì–†–´.md` - –∏–≥—Ä—ã
   - `–ì–û–¢–û–í–û_–†–ï–§–ê–ö–¢–û–†–ò–ù–ì_–®–ê–ì_1.2_–¢–ò–ö–ï–¢–´.md` - —Ç–∏–∫–µ—Ç—ã

3. **–ò–≥—Ä–æ–≤–∞—è –º–µ—Ç–∞:**
   - `–ì–û–¢–û–í–û_–®–ê–ì_2.1_–°–ï–ó–û–ù–´.md` - —Å–µ–∑–æ–Ω—ã
   - `–ì–û–¢–û–í–û_–®–ê–ì_2.2_–î–û–°–¢–ò–ñ–ï–ù–ò–Ø.md` - –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
   - `–ì–û–¢–û–í–û_–ò–ì–†–û–í–ê–Ø_–ú–ï–¢–ê_v3.0.md` - –æ–±—â–∞—è —Å–≤–æ–¥–∫–∞
   - `–ó–ê–ü–£–°–ö_–ò–ì–†–û–í–ê–Ø_–ú–ï–¢–ê.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞

4. **Discord:**
   - `–ì–û–¢–û–í–û_–®–ê–ì_2.3_DISCORD.md` - Discord –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

5. **–§–∏–Ω–∞–ª—å–Ω—ã–µ:**
   - `–§–ò–ù–ê–õ–¨–ù–ê–Ø_–°–í–û–î–ö–ê_v3.0.md` - —Å–≤–æ–¥–∫–∞ v3.0
   - `–§–ò–ù–ê–õ–¨–ù–ê–Ø_–°–í–û–î–ö–ê_–ò–ì–†–û–í–ê–Ø_–ú–ï–¢–ê.md` - —Å–≤–æ–¥–∫–∞ –∏–≥—Ä–æ–≤–æ–π –º–µ—Ç—ã
   - `–§–ò–ù–ê–õ–¨–ù–ê–Ø_–°–í–û–î–ö–ê_–ü–û–õ–ù–ê–Ø.md` - —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç

---

## üéØ –ß—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å

### –î–æ (v2.1):
- ‚ùå JSON –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- ‚ùå `context.user_data` –±–µ–∑ TTL
- ‚ùå –†–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã callback
- ‚ùå –ù–µ—Ç –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –º–æ—Ç–∏–≤–∞—Ü–∏–∏
- ‚ùå –ù–µ—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- ‚ùå –ù–µ—Ç Discord –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- ‚ùå –†—É—á–Ω–∞—è –≤—ã–¥–∞—á–∞ —Ä–æ–ª–µ–π

### –ü–æ—Å–ª–µ (v3.0):
- ‚úÖ PostgreSQL + Redis
- ‚úÖ Clean Architecture (4 —Å–ª–æ—è)
- ‚úÖ State Manager —Å TTL
- ‚úÖ –ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç callback
- ‚úÖ –°–µ–∑–æ–Ω—ã (30 –¥–Ω–µ–π)
- ‚úÖ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è (20 —à—Ç—É–∫)
- ‚úÖ Discord –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (11 —Ä–æ–ª–µ–π)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤—ã–¥–∞—á–∞ —Ä–æ–ª–µ–π
- ‚úÖ –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–≥–æ
- ‚úÖ –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å

---

## üéÆ –ò–≥—Ä–æ–≤–∞—è –º–µ—Ç–∞

### –ú–æ—Ç–∏–≤–∞—Ü–∏—è –∏–≥—Ä–æ–∫–∞:

1. **–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–∞—è (–∏–≥—Ä—ã):**
   - –í—ã–∏–≥—Ä–∞—Ç—å –∏–≥—Ä—É ‚Üí –ø–æ–ª—É—á–∏—Ç—å XP/–º–æ–Ω–µ—Ç—ã
   - –°—Ä–∞–∑—É –≤–∏–¥–∏–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

2. **–°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω–∞—è (–¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è):**
   - –í—ã–∏–≥—Ä–∞—Ç—å 10 –∏–≥—Ä ‚Üí –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
   - –ò–≥—Ä–∞—Ç—å 3 –¥–Ω—è –ø–æ–¥—Ä—è–¥ ‚Üí –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
   - –¶–µ–ª–∏ –Ω–∞ –Ω–µ–¥–µ–ª—é-–º–µ—Å—è—Ü

3. **–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è (—Å–µ–∑–æ–Ω—ã):**
   - –ü–æ–ø–∞—Å—Ç—å –≤ —Ç–æ–ø-50 —Å–µ–∑–æ–Ω–∞ ‚Üí –ø–æ–ª—É—á–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—ã
   - –°—Ç–∞—Ç—å —á–µ–º–ø–∏–æ–Ω–æ–º —Å–µ–∑–æ–Ω–∞ ‚Üí –ø–æ–ª—É—á–∏—Ç—å —Ç–∏—Ç—É–ª
   - –¶–µ–ª–∏ –Ω–∞ 30 –¥–Ω–µ–π

4. **–ü—Ä–µ—Å—Ç–∏–∂ (Discord):**
   - –ü–æ–ª—É—á–∏—Ç—å —Ä–æ–ª–∏ –∑–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
   - –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
   - –ú–æ—Ç–∏–≤–∞—Ü–∏—è –¥–ª—è –æ–±–µ–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º

---

## üîç –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã (–Ω–µ –ª–æ–º–∞—é—Ç –±–æ—Ç–∞)
- –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è (constraint –≤ –ë–î)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- –ò–Ω–¥–µ–∫—Å—ã –≤ –ë–î –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Redis
- Async/await –≤–µ–∑–¥–µ
- –ú–∏–Ω–∏–º—É–º –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î

### –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å:
- –û—á–µ—Ä–µ–¥—å —Ä–æ–ª–µ–π –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ (–¥–æ 3 —Ä–∞–∑)
- –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

---

## üéØ –ß—Ç–æ –¥–∞–ª—å—à–µ

### –≠—Ç–∞–ø 3: –¢–∏–∫–µ—Ç—ã v2
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π —Å —Ç–∏–∫–µ—Ç–∞–º–∏
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∏ –æ—Ü–µ–Ω–∫–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- –ê–≤—Ç–æ–æ—Ç–≤–µ—Ç—ã

### –≠—Ç–∞–ø 4: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ
- –ë–æ–ª—å—à–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- –°–µ–∑–æ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- –ö—É–ª–¥–∞—É–Ω—ã –¥–ª—è –∏–≥—Ä
- –ë–æ–Ω—É—Å—ã –∑–∞ —Å—Ç—Ä–∏–∫–∏
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–Ω–≥–æ–≤ —Å Discord

### –≠—Ç–∞–ø 5: AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è –∫–≤–∏–∑–æ–≤
- –ß–µ—Ä–Ω–æ–≤–∏–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤ –≤ —Ç–∏–∫–µ—Ç–∞—Ö
- –í—ã—è–≤–ª–µ–Ω–∏–µ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:
- [x] Clean Architecture v3.0
- [x] –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- [x] –°–∏—Å—Ç–µ–º–∞ —Å–µ–∑–æ–Ω–æ–≤
- [x] –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- [x] Discord –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [x] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ v2.1

### –î–µ–ø–ª–æ–π (–Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å):
- [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (001-005)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å v3.0
- [ ] –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å v2.1
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏

---

## üéâ –ò—Ç–æ–≥–∏

**–ü–æ–ª–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ v3.0 –∑–∞–≤–µ—Ä—à–µ–Ω–∞!**

–°–æ–∑–¥–∞–Ω —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–π, –∏–≥—Ä–æ–≤–æ–π Telegram-–±–æ—Ç —Å:
- ‚úÖ Clean Architecture
- ‚úÖ PostgreSQL + Redis
- ‚úÖ –ò–≥—Ä–æ–≤–æ–π –º–µ—Ç–æ–π (—Å–µ–∑–æ–Ω—ã + –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è)
- ‚úÖ Discord –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º
- ‚úÖ –ü–æ–ª–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π

**–ì–æ—Ç–æ–≤–æ –∫:**
- –î–µ–ø–ª–æ—é –Ω–∞ Railway
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –î–∞–ª—å–Ω–µ–π—à–µ–º—É —Ä–∞–∑–≤–∏—Ç–∏—é
- –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é

---

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 08.02.2026  
**–í–µ—Ä—Å–∏—è:** v3.0 + –ò–≥—Ä–æ–≤–∞—è –º–µ—Ç–∞ + Discord  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –î–ï–ü–õ–û–Æ

**–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:** Kiro AI Assistant  
**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** Clean Architecture + DDD + CQRS  
**–í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** ~10 —á–∞—Å–æ–≤  
**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~13600  
**–§–∞–π–ª–æ–≤:** ~60


---

## üîÑ –û–ë–ù–û–í–õ–ï–ù–ò–ï: –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (–≠—Ç–∞–ø 1)

**–î–∞—Ç–∞:** 08.02.2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `–ì–û–¢–û–í–û_–î–í–£–°–¢–û–†–û–ù–ù–Ø–Ø_–°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø_–≠–¢–ê–ü_1.md`

### –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

#### 1. –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö ‚úÖ
**–§–∞–π–ª:** `domain/models/sync_event.py`
- `SyncEvent` - —Å–æ–±—ã—Ç–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- `Transaction` - —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –¥–ª—è –∞—É–¥–∏—Ç–∞
- `SyncState` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- Enums: `EventSource`, `EventType`, `EventStatus`
- –£—Ç–∏–ª–∏—Ç–∞ `generate_idempotency_key()`

#### 2. –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ‚úÖ
**–§–∞–π–ª:** `infrastructure/database/repositories/sync_repository.py`
- CRUD –¥–ª—è —Å–æ–±—ã—Ç–∏–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- CRUD –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- CRUD –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –ú–µ—Ç–æ–¥—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è pending —Å–æ–±—ã—Ç–∏–π
- –ú–µ—Ç–æ–¥—ã –¥–ª—è reconcile
- –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Å–æ–±—ã—Ç–∏–π
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

#### 3. –°–µ—Ä–≤–∏—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ ‚úÖ
**–§–∞–π–ª:** `domain/services/sync_service.py`
- –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π (XP, –±–∞–ª–∞–Ω—Å, —Ä–∞–Ω–≥, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π —Å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å—é
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–∏–Ω–≥-–ø–æ–Ω–≥–∞ —á–µ—Ä–µ–∑ `processed_by`
- Reconcile –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π
- Rank-Derived —Å—Ç—Ä–∞—Ç–µ–≥–∏—è (—Ä–∞–Ω–≥ –∏–∑ XP)

#### 4. –§–æ–Ω–æ–≤—ã–µ –≤–æ—Ä–∫–µ—Ä—ã ‚úÖ
**–§–∞–π–ª:** `application/jobs/sync_worker.py`
- `SyncWorker` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–∏ (–∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥)
- `ReconcileWorker` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π (–∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç)
- `CleanupWorker` - –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Å–æ–±—ã—Ç–∏–π (–∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞)

#### 5. –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î ‚úÖ
**–§–∞–π–ª:** `infrastructure/database/migrations/006_bidirectional_sync.sql`
- –¢–∞–±–ª–∏—Ü–∞ `sync_events` - —Å–æ–±—ã—Ç–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –¢–∞–±–ª–∏—Ü–∞ `transactions` - —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è –∞—É–¥–∏—Ç–∞
- –¢–∞–±–ª–∏—Ü–∞ `sync_state` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –¢–∞–±–ª–∏—Ü–∞ `rank_role_mappings` - –º–∞–ø–ø–∏–Ω–≥ —Ä–∞–Ω–≥–æ–≤ –Ω–∞ Discord —Ä–æ–ª–∏
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ `discord_links` (last_sync_at, sync_enabled)
- –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞—Ä—ã—Ö —Å–æ–±—ã—Ç–∏–π

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Telegram Bot   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   Sync Engine    ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ  Discord Bot    ‚îÇ
‚îÇ   (Python)      ‚îÇ         ‚îÇ  (Event-driven)  ‚îÇ         ‚îÇ   (discord.py)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ                            ‚îÇ                            ‚îÇ
        ‚îÇ                            ‚îÇ                            ‚îÇ
        ‚ñº                            ‚ñº                            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         PostgreSQL Database                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ  ‚îÇ sync_events  ‚îÇ  ‚îÇ transactions ‚îÇ  ‚îÇ sync_state   ‚îÇ  ‚îÇ rank_roles  ‚îÇ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü–æ—Ç–æ–∫ —Å–æ–±—ã—Ç–∏—è (Telegram ‚Üí Discord):
1. User –∏–≥—Ä–∞–µ—Ç –≤ –∏–≥—Ä—É ‚Üí –ø–æ–ª—É—á–∞–µ—Ç XP
2. `GameService.add_xp()` ‚Üí `SyncService.create_xp_change_event()`
3. –°–æ–±—ã—Ç–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `sync_events` (status=pending)
4. `SyncWorker` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
5. `SyncService.process_event()` ‚Üí `_process_xp_change()`
6. Discord Bot –ø–æ–ª—É—á–∞–µ—Ç XP —á–µ—Ä–µ–∑ API (TODO)
7. –°–æ–±—ã—Ç–∏–µ –ø–æ–º–µ—á–∞–µ—Ç—Å—è (status=completed, processed_by=discord)

### –ß—Ç–æ –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (TODO):

#### Discord Bot (discord.py) ‚ùå
- –°–æ–∑–¥–∞—Ç—å Discord –±–æ—Ç–∞ —Å discord.py v2.x
- –ö–æ–º–∞–Ω–¥—ã: `/link`, `/unlink`, `/profile`, `/sync`
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏: `on_voice_state_update`, `on_message`
- API –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è XP, –±–∞–ª–∞–Ω—Å–∞, —Ä–æ–ª–µ–π

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Telegram Bot ‚ùå
- –û–±–Ω–æ–≤–∏—Ç—å `GameService` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π
- –û–±–Ω–æ–≤–∏—Ç—å `UserService` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π
- –û–±–Ω–æ–≤–∏—Ç—å `SeasonService` –¥–ª—è —Å–æ–±—ã—Ç–∏–π —Ä–∞–Ω–≥–∞
- –û–±–Ω–æ–≤–∏—Ç—å `AchievementService` –¥–ª—è —Å–æ–±—ã—Ç–∏–π –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤–æ—Ä–∫–µ—Ä—ã –≤ `main_v3.py`

#### Rank Role Mapping ‚ùå
- –ó–∞–ø–æ–ª–Ω–∏—Ç—å `rank_role_mappings` —Ä–µ–∞–ª—å–Ω—ã–º–∏ Discord role_id
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–º–µ–Ω—É —Ä–æ–ª–µ–π –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–Ω–≥–∞

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

**–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (40 –º–∏–Ω—É—Ç):**
1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é 006 (5 –º–∏–Ω)
2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ main_v3.py (15 –º–∏–Ω)
3. –û–±–Ω–æ–≤–∏—Ç—å GameService (10 –º–∏–Ω)
4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π (10 –º–∏–Ω)

**–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (3-4 —á–∞—Å–∞):**
1. –°–æ–∑–¥–∞—Ç—å Discord Bot –ø—Ä–æ–µ–∫—Ç
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
3. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å SyncService
4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—é—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- `–ì–û–¢–û–í–û_–î–í–£–°–¢–û–†–û–ù–ù–Ø–Ø_–°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø_–≠–¢–ê–ü_1.md` - –ø–æ–ª–Ω–∞—è —Å–≤–æ–¥–∫–∞
- `–°–õ–ï–î–£–Æ–©–ò–ï_–®–ê–ì–ò_–°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- `–ê–†–•–ò–¢–ï–ö–¢–£–†–ê_–î–í–£–°–¢–û–†–û–ù–ù–ï–ô_–°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–ò.md` - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

‚úÖ **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –∫–∞–∂–¥–æ–µ —Å–æ–±—ã—Ç–∏–µ –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á  
‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç –ø–∏–Ω–≥-–ø–æ–Ω–≥–∞** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ `processed_by`  
‚úÖ **Rank-Derived —Å—Ç—Ä–∞—Ç–µ–≥–∏—è** - —Ä–∞–Ω–≥ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∏–∑ XP  
‚úÖ **Retry –º–µ—Ö–∞–Ω–∏–∑–º** - –¥–æ 3 –ø–æ–ø—ã—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏  
‚úÖ **Reconcile** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π  
‚úÖ **Audit trail** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π  

---

**–û–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–æ–±–Ω–æ–≤–ª–µ–Ω–æ):
- **–ú–æ–¥–µ–ª–∏:** 5 —Ñ–∞–π–ª–æ–≤ (+1: sync_event)
- **–ú–∏–≥—Ä–∞—Ü–∏–∏:** 6 —Ñ–∞–π–ª–æ–≤ (+1: 006_bidirectional_sync)
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:** 7 —Ñ–∞–π–ª–æ–≤ (+1: sync_repository)
- **–°–µ—Ä–≤–∏—Å—ã:** 8 —Ñ–∞–π–ª–æ–≤ (+1: sync_service)
- **Jobs:** 2 —Ñ–∞–π–ª–∞ (+1: sync_worker)
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** 18+ —Ñ–∞–π–ª–æ–≤ (+3)

**–ò—Ç–æ–≥–æ:** ~65 —Ñ–∞–π–ª–æ–≤ (+5)

### –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ):
- **–ú–æ–¥–µ–ª–∏:** ~1000 —Å—Ç—Ä–æ–∫ (+200)
- **–ú–∏–≥—Ä–∞—Ü–∏–∏:** ~700 —Å—Ç—Ä–æ–∫ (+200)
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:** ~2500 —Å—Ç—Ä–æ–∫ (+500)
- **–°–µ—Ä–≤–∏—Å—ã:** ~3200 —Å—Ç—Ä–æ–∫ (+700)
- **Jobs:** ~400 —Å—Ç—Ä–æ–∫ (+400)
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** ~7000 —Å—Ç—Ä–æ–∫ (+2000)

**–ò—Ç–æ–≥–æ:** ~14800 —Å—Ç—Ä–æ–∫ (+1200)

---

**–í–µ—Ä—Å–∏—è:** v3.0 + –ò–≥—Ä–æ–≤–∞—è –º–µ—Ç–∞ + Discord + Bidirectional Sync (–≠—Ç–∞–ø 1)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞, —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
