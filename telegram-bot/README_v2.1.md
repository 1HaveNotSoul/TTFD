# TTFD Telegram Bot v2.1

## 🎉 Обновление v2.1 - Тикет-система + Игры

Полноценный Telegram-бот с системой рангов, экономикой, тикетами и играми.

## ✨ Новые функции:

### 🎫 Тикет-система с FSM
- Пошаговое создание тикета (категория → текст → приоритет → подтверждение)
- Приоритеты: низкий, средний, высокий
- Админ-панель с фильтрами (открытые, в работе, закрытые)
- "Взять в работу" - назначение тикета админу
- Уведомления при ответах
- File locking для защиты от конфликтов

### 🎮 Игры
1. **🎲 Угадай число** - угадай от 1 до 10, выигрыш × 3
2. **🧠 Квиз** - ответь на вопрос, выигрыш × 2
3. **🎰 Ежедневный спин** - бесплатно, 1 раз/24 часа, до 500 монет

## 🚀 Быстрый старт:

```bash
# Установка зависимостей
pip install python-telegram-bot==20.7 python-dotenv==1.0.0

# Настройка .env
TELEGRAM_BOT_TOKEN=твой_токен
TELEGRAM_ADMIN_IDS=твой_id

# Запуск
cd TTFD-Telegram
python main.py
```

## 📁 Структура:

```
TTFD-Telegram/
├── main.py                    # Главный файл (4 FSM)
├── database.py                # База данных
├── config.py                  # Конфигурация
├── handlers/
│   ├── tickets.py             # 🆕 FSM тикетов
│   ├── games.py               # 🆕 FSM игр
│   ├── commands.py            # Команды
│   ├── buttons.py             # Кнопки
│   ├── messages.py            # Сообщения
│   └── admin.py               # Админ
├── utils/
│   ├── tickets.py             # Логика тикетов
│   ├── games.py               # 🆕 Логика игр
│   └── shop.py                # Магазин
└── data/
    ├── user_data.json         # Пользователи
    ├── tickets.json           # Тикеты
    └── shop.json              # Магазин
```

## 📚 Документация:

- `БЫСТРЫЙ_СТАРТ_v2.1.txt` - Инструкция по запуску
- `ТЕСТИРОВАНИЕ_v2.1.txt` - Чеклист тестирования
- `ФИНАЛЬНАЯ_СВОДКА_v2.1.md` - Полная документация
- `ОБНОВЛЕНИЕ_v2.1_ГОТОВО.md` - Что добавлено

## 🎯 Основные команды:

- `/start` - Главное меню
- `/help` - Справка
- `/profile` - Профиль
- `/daily` - Ежедневная награда
- `/leaderboard` - Таблица лидеров
- `/ticket` - Создать тикет
- `/mytickets` - Мои тикеты
- `/admin` - Админ-панель (только для админов)
- `/broadcast <текст>` - Рассылка (только для админов)

## 🎮 Игры:

Доступны через меню "🎮 Игры" в `/start`

## 🔧 Технологии:

- python-telegram-bot 20.7
- ConversationHandler для FSM
- File locking для атомарной записи
- JSON для хранения данных

## 📊 Статистика:

- 1500+ строк кода
- 4 ConversationHandlers
- 6 состояний FSM
- 30+ callback patterns
- 3 игры
- 20 рангов

## ✅ Готово к использованию!

Запускай и тестируй! 🚀
