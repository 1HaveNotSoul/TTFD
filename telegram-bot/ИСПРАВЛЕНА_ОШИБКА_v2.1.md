# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ê: –û—à–∏–±–∫–∞ –≤ v2.1

**–î–∞—Ç–∞:** 08.02.2026  
**–ü—Ä–æ–±–ª–µ–º–∞:** `TypeError: Database.update_user() got multiple values for argument 'telegram_id'`

---

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∏–≥—Ä–µ –≤ –∫–≤–∏–∑ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:
```python
File "/app/utils/games.py", line 283, in update_game_stats
    db.update_user(telegram_id, **user)
TypeError: Database.update_user() got multiple values for argument 'telegram_id'
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- `db.update_user(telegram_id, **user)` –ø–µ—Ä–µ–¥–∞—ë—Ç `telegram_id` –¥–≤–∞–∂–¥—ã
- –û–¥–∏–Ω —Ä–∞–∑ —è–≤–Ω–æ –∫–∞–∫ –ø–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç
- –í—Ç–æ—Ä–æ–π —Ä–∞–∑ –≤ `**user` (—Ç–∞–∫ –∫–∞–∫ `user` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–µ `telegram_id`)

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

**–§–∞–π–ª:** `utils/games.py` (—Å—Ç—Ä–æ–∫–∞ 283)

**–ë—ã–ª–æ:**
```python
db.update_user(telegram_id, **user)
```

**–°—Ç–∞–ª–æ:**
```python
# –£–±–∏—Ä–∞–µ–º telegram_id –∏–∑ user –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ update_user
user_updates = {k: v for k, v in user.items() if k != 'telegram_id'}
db.update_user(telegram_id, **user_updates)
```

---

## üöÄ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

–ò–∑–º–µ–Ω–µ–Ω–∏—è —É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –≤ —Ñ–∞–π–ª–µ `TTFD/telegram-bot/utils/games.py`.

–ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –¥–µ–ø–ª–æ–µ –Ω–∞ Railway –æ—à–∏–±–∫–∞ –∏—Å—á–µ–∑–Ω–µ—Ç.

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

–≠—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è **—Å—Ç–∞—Ä–æ–≥–æ –±–æ—Ç–∞ v2.1**.

**–ù–æ–≤—ã–π –±–æ—Ç v3.0** (—Å Clean Architecture) –Ω–µ –∏–º–µ–µ—Ç —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã, —Ç–∞–∫ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:
- PostgreSQL –≤–º–µ—Å—Ç–æ JSON
- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –≤–º–µ—Å—Ç–æ –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –ë–î
- –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –º–æ–¥–µ–ª–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ v3.0 –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∏ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π (—Å–µ–∑–æ–Ω—ã, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, Discord –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è).

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
