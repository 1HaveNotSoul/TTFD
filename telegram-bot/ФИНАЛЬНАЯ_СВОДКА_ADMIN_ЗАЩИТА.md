# ‚úÖ –§–ò–ù–ê–õ–¨–ù–ê–Ø –°–í–û–î–ö–ê - –ó–∞—â–∏—Ç–∞ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏

## üéØ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–ü—Ä–æ—Å–º–æ—Ç—Ä –ë–î" ‚úÖ
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –ø–æ 10 –∑–∞–ø–∏—Å–µ–π
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü—ã

### 2. –ó–∞—â–∏—Ç–∞ –ø–æ Telegram ID ‚úÖ
- –ö–æ–º–∞–Ω–¥–∞ `/admin` –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è ID –∏–∑ `TELEGRAM_ADMIN_IDS`
- –í—Å–µ –∫–Ω–æ–ø–∫–∏ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏ –∑–∞—â–∏—â–µ–Ω—ã
- –í—Å–µ –∫–æ–º–∞–Ω–¥—ã (`/setrole`, `/broadcast`) –∑–∞—â–∏—â–µ–Ω—ã
- –í—Å–µ callback —Ç–∏–∫–µ—Ç–æ–≤ –∑–∞—â–∏—â–µ–Ω—ã

---

## üîí –¢–µ–∫—É—â–∏–µ –∞–¥–º–∏–Ω—ã

```
TELEGRAM_ADMIN_IDS=8398669299,1863940541
```

–¢–æ–ª—å–∫–æ —ç—Ç–∏ –¥–≤–∞ ID –∏–º–µ—é—Ç –¥–æ—Å—Ç—É–ø –∫:
- `/admin` - –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
- `/setrole` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–µ–π
- `/broadcast` - —Ä–∞—Å—Å—ã–ª–∫–∞
- –í—Å–µ –∫–Ω–æ–ø–∫–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–∏ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏

---

## üìã –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
1. `–ì–û–¢–û–í–û_–ü–†–û–°–ú–û–¢–†_–ë–î.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ë–î
2. `–ë–´–°–¢–†–´–ô_–°–¢–ê–†–¢_–ü–†–û–°–ú–û–¢–†_–ë–î.txt` - –∫—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
3. `–ì–û–¢–û–í–û_ADMIN_ID_–ü–†–û–í–ï–†–ö–ê.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∑–∞—â–∏—Ç—ã
4. `–ë–´–°–¢–†–´–ô_–°–¢–ê–†–¢_ADMIN_SECURITY.txt` - –∫—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
5. `–§–ò–ù–ê–õ–¨–ù–ê–Ø_–°–í–û–î–ö–ê_ADMIN_–ó–ê–©–ò–¢–ê.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

**1. `core/callbacks.py`**
```python
# –î–æ–±–∞–≤–ª–µ–Ω—ã callback –¥–ª—è –ë–î:
AdminCallback.database()
AdminCallback.db_table(table_name, page)
```

**2. `domain/services/permission_service.py`**
```python
# –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã:
is_admin_by_id(telegram_id) -> bool
@require_admin_id() - –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä
```

**3. `application/handlers/admin/admin_handler.py`**
```python
# –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã:
handle_database_panel() - –≤—ã–±–æ—Ä —Ç–∞–±–ª–∏—Ü—ã
handle_db_table_view() - –ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–∞–±–ª–∏—Ü—ã
handle_panel() - –≤–æ–∑–≤—Ä–∞—Ç –≤ –ø–∞–Ω–µ–ª—å
handle_users_panel() - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

# –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ admin ID –≤–æ –≤—Å–µ—Ö –º–µ—Ç–æ–¥–∞—Ö
```

**4. `application/handlers/admin/admin_router.py`**
```python
# –î–æ–±–∞–≤–ª–µ–Ω–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è:
if action == "database": ...
if action == "db": ...
```

**5. `application/handlers/tickets/admin_ticket_handler.py`**
```python
# –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ admin ID –≤–æ –≤—Å–µ—Ö –º–µ—Ç–æ–¥–∞—Ö:
handle_panel()
handle_list()
handle_view()
handle_assign()
handle_close()
```

**6. `.env`**
```env
TELEGRAM_ADMIN_IDS=8398669299,1863940541
```

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ë–î:
```
1. /admin
2. –ù–∞–∂–º–∏ "üóÑÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä –ë–î"
3. –í—ã–±–µ—Ä–∏ —Ç–∞–±–ª–∏—Ü—É
4. –õ–∏—Å—Ç–∞–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã ‚¨ÖÔ∏è ‚û°Ô∏è
```

### –î–æ–±–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω–∞:
```
1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π .env:
   TELEGRAM_ADMIN_IDS=8398669299,1863940541,–ù–û–í–´–ô_ID

2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞
```

### Railway:
```
1. Railway ‚Üí Telegram Bot ‚Üí Variables
2. TELEGRAM_ADMIN_IDS ‚Üí –î–æ–±–∞–≤—å ID —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é
3. Deploy
```

---

## üõ°Ô∏è –°–∏—Å—Ç–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –î–≤–æ–π–Ω–∞—è –∑–∞—â–∏—Ç–∞:
1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ Telegram ID** - –ø–µ—Ä–≤—ã–π —É—Ä–æ–≤–µ–Ω—å
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ –≤ –ë–î** - –≤—Ç–æ—Ä–æ–π —É—Ä–æ–≤–µ–Ω—å

### –ß—Ç–æ –∑–∞—â–∏—â–µ–Ω–æ:

**–ö–æ–º–∞–Ω–¥—ã:**
- `/admin` - –≥–ª–∞–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å
- `/setrole` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–µ–π
- `/broadcast` - —Ä–∞—Å—Å—ã–ª–∫–∞

**Callback (–∫–Ω–æ–ø–∫–∏):**
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –ü—Ä–æ—Å–º–æ—Ç—Ä –ë–î (–≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞–º–∏ (–≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ê–¥–º–∏–Ω (ID –≤ —Å–ø–∏—Å–∫–µ) ‚Üí –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø ‚úÖ
- –û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí "‚ùå –£ —Ç–µ–±—è –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞" ‚ùå

---

## üìä –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ë–î

### 1. Users (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
```
ID: 1
üë§ –ò–≤–∞–Ω (@ivan)
üíé XP: 1500 | ü™ô –ú–æ–Ω–µ—Ç—ã: 500
üèÜ –†–∞–Ω–≥: 5 | üé≠ –†–æ–ª—å: user
üéÆ Discord: 123456789
üìÖ –°–æ–∑–¥–∞–Ω: 2026-01-15
```

### 2. Game History (–ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä)
```
ID: 42
üë§ User ID: 1
üéÆ –ò–≥—Ä–∞: guess
‚úÖ –ü–æ–±–µ–¥–∞
üí∞ –°—Ç–∞–≤–∫–∞: 50 | –í—ã–∏–≥—Ä—ã—à: 100
üìÖ 2026-02-08 14:30
```

### 3. Tickets (–¢–∏–∫–µ—Ç—ã)
```
ID: 5 üü¢
üë§ User ID: 1
üìÅ –ö–∞—Ç–µ–≥–æ—Ä–∏—è: technical
‚ö° –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: high
üìù –ü—Ä–æ–±–ª–µ–º–∞ —Å –±–æ—Ç–æ–º...
üìÖ 2026-02-08 12:00
```

### 4. Achievements (–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è)
```
ID: 1
üèÜ –ü–µ—Ä–≤–∞—è –ø–æ–±–µ–¥–∞
üìù –í—ã–∏–≥—Ä–∞–π —Å–≤–æ—é –ø–µ—Ä–≤—É—é –∏–≥—Ä—É...
‚≠ê –†–µ–¥–∫–æ—Å—Ç—å: common
üéÅ –ù–∞–≥—Ä–∞–¥–∞: 100 XP, 50 –º–æ–Ω–µ—Ç
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
```
/admin (–∫–æ–º–∞–Ω–¥–∞)
  ‚Üì
@require_admin_id() (–¥–µ–∫–æ—Ä–∞—Ç–æ—Ä)
  ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞: telegram_id in TELEGRAM_ADMIN_IDS
  ‚Üì
–ï—Å–ª–∏ –î–ê ‚Üí –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–∞–Ω–µ–ª—å
–ï—Å–ª–∏ –ù–ï–¢ ‚Üí "‚ùå –£ —Ç–µ–±—è –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞"
```

### Callback –∑–∞—â–∏—Ç–∞:
```python
async def handle_stats_panel(self, update, context):
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –Ω–∞—á–∞–ª–µ –∫–∞–∂–¥–æ–≥–æ –º–µ—Ç–æ–¥–∞
    if not PermissionService.is_admin_by_id(str(user_tg.id)):
        await query.answer("‚ùå –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞", show_alert=True)
        return
```

### –ü–∞–≥–∏–Ω–∞—Ü–∏—è –ë–î:
```python
# –ü–æ 10 –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
LIMIT 10 OFFSET (page * 10)

# –ö–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
‚¨ÖÔ∏è –ù–∞–∑–∞–¥ (–µ—Å–ª–∏ page > 0)
‚û°Ô∏è –í–ø–µ—Ä–µ–¥ (–µ—Å–ª–∏ –µ—Å—Ç—å –µ—â–µ –¥–∞–Ω–Ω—ã–µ)
```

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–ó–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞:
```bash
cd C:\Users\brawl\OneDrive\Desktop\–ø–∞–ø–∫–∏\TTFD\telegram-bot
python main_v3.py
```

–ü—Ä–æ–≤–µ—Ä—å:
1. `/admin` –æ—Ç –∞–¥–º–∏–Ω–∞ ‚Üí –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–∞–Ω–µ–ª—å ‚úÖ
2. `/admin` –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Üí –û—Ç–∫–∞–∑ ‚ùå
3. "üóÑÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä –ë–î" ‚Üí –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã ‚úÖ
4. –í—ã–±–æ—Ä —Ç–∞–±–ª–∏—Ü—ã ‚Üí –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ ‚úÖ

---

**–î–∞—Ç–∞**: 2026-02-08  
**–í–µ—Ä—Å–∏—è**: v3.0 + Database Viewer + Admin ID Security  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É
