# ‚úÖ –ì–û–¢–û–í–û: –®–∞–≥ 2.2 - –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π

**–î–∞—Ç–∞:** 08.02.2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ  
**–í–µ—Ä—Å–∏—è:** v3.0 + –°–µ–∑–æ–Ω—ã + –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è

---

## üéØ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ú–æ–¥–µ–ª–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π ‚úÖ
**–§–∞–π–ª:** `domain/models/achievement.py`

**–°–æ–∑–¥–∞–Ω—ã –º–æ–¥–µ–ª–∏:**
- `Achievement` - –º–æ–¥–µ–ª—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- `UserAchievement` - –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `AchievementCategory` - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (games, activity, streak, tickets, season, special)
- `AchievementRarity` - —Ä–µ–¥–∫–æ—Å—Ç—å (common, rare, epic, legendary)
- `DEFAULT_ACHIEVEMENTS` - 20 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

**–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π:**
- üéÆ **–ò–≥—Ä—ã** - –∑–∞ –ø–æ–±–µ–¥—ã (5 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π)
- ‚ö° **–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** - –∑–∞ –∏–≥—Ä—ã –∏ –±–æ–≥–∞—Ç—Å—Ç–≤–æ (4 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è)
- üî• **–°—Ç—Ä–∏–∫–∏** - –∑–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (3 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è)
- üé´ **–¢–∏–∫–µ—Ç—ã** - –∑–∞ –æ–±—Ä–∞—â–µ–Ω–∏—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É (2 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è)
- üèÜ **–°–µ–∑–æ–Ω—ã** - –∑–∞ —É—á–∞—Å—Ç–∏–µ –∏ —Ç–æ–ø –ø–æ–∑–∏—Ü–∏–∏ (4 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è)
- üåü **–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ** - —Å–∫—Ä—ã—Ç—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è (2 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è)

**–†–µ–¥–∫–æ—Å—Ç—å:**
- ‚ö™ **–û–±—ã—á–Ω–æ–µ** (common) - –ø—Ä–æ—Å—Ç—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- üîµ **–†–µ–¥–∫–æ–µ** (rare) - —Å—Ä–µ–¥–Ω–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- üü£ **–≠–ø–∏—á–µ—Å–∫–æ–µ** (epic) - —Å–ª–æ–∂–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- üü° **–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ** (legendary) - –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω—ã–µ

---

### 2. –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î ‚úÖ
**–§–∞–π–ª:** `infrastructure/database/migrations/004_achievements.sql`

**–°–æ–∑–¥–∞–Ω—ã —Ç–∞–±–ª–∏—Ü—ã:**
- `achievements` - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- `user_achievements` - –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `updated_at`
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å: –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - –æ–¥–Ω–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
- 20 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –≤—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- Discord —Ä–æ–ª–∏ –¥–ª—è 9 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
```bash
psql -U postgres -d ttfd_bot -f infrastructure/database/migrations/004_achievements.sql
```

---

### 3. –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π ‚úÖ
**–§–∞–π–ª:** `infrastructure/database/repositories/achievement_repository.py`

**–ú–µ—Ç–æ–¥—ã:**

#### –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è:
- `get_achievement()` - –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –ø–æ ID
- `get_all_achievements()` - –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è (—Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏)
- `get_achievements_by_category()` - –ø–æ–ª—É—á–∏—Ç—å –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

#### –ü—Ä–æ–≥—Ä–µ—Å—Å:
- `get_user_achievement()` - –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `get_or_create_user_achievement()` - –ø–æ–ª—É—á–∏—Ç—å –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å
- `update_progress()` - –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
- `mark_rewards_claimed()` - –æ—Ç–º–µ—Ç–∏—Ç—å –≤—ã–¥–∞—á—É –Ω–∞–≥—Ä–∞–¥

#### –°–ø–∏—Å–∫–∏:
- `get_user_achievements()` - –≤—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º
- `get_completed_achievements()` - –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ
- `get_unclaimed_achievements()` - –Ω–µ–∑–∞–±—Ä–∞–Ω–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- `get_user_stats()` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π

---

### 4. –°–µ—Ä–≤–∏—Å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π ‚úÖ
**–§–∞–π–ª:** `domain/services/achievement_service.py`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
- `check_achievements()` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ —Ç–∏–ø—É
- `check_game_achievements()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏–≥—Ä
- `check_streak_achievements()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä–∏–∫–æ–≤
- `check_wealth_achievements()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ XP/–º–æ–Ω–µ—Ç
- `check_ticket_achievements()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤
- `check_season_achievements()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ–∑–æ–Ω–æ–≤
- `check_special_achievement()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö

#### –ù–∞–≥—Ä–∞–¥—ã:
- `_give_achievement_reward()` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤—ã–¥–∞—á–∞ –Ω–∞–≥—Ä–∞–¥
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ XP –∏ –º–æ–Ω–µ—Ç
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ Discord —Ä–æ–ª–µ–π (–¥–ª—è –±—É–¥—É—â–µ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)

#### –ü—Ä–æ—Å–º–æ—Ç—Ä:
- `get_all_achievements()` - –≤—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- `get_user_achievements()` - —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º
- `get_completed_achievements()` - –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ
- `get_unclaimed_achievements()` - –Ω–µ–∑–∞–±—Ä–∞–Ω–Ω—ã–µ

#### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- `format_rarity()` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–¥–∫–æ—Å—Ç—å
- `format_category()` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é

---

### 5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–≥—Ä–∞–º–∏ ‚úÖ
**–§–∞–π–ª:** `domain/services/game_service.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω `achievement_service` –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –∏–≥—Ä—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:
  - –ó–∞ –ø–æ–±–µ–¥—ã (`games_won`)
  - –ó–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (`games_played`)
  - –ó–∞ –±–æ–≥–∞—Ç—Å—Ç–≤–æ (`total_xp`, `total_coins`)
- –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –∑–∞ –¥–∂–µ–∫–ø–æ—Ç –≤ —Å–ø–∏–Ω–µ

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
```python
# –ü–æ—Å–ª–µ –∏–≥—Ä—ã:
if self.achievement_service:
    stats = await self.game_repo.get_user_stats(user.id)
    await self.achievement_service.check_game_achievements(
        user_id=user.id,
        games_played=stats.total_games,
        games_won=stats.total_wins
    )
    
    await self.achievement_service.check_wealth_achievements(
        user_id=user.id,
        total_xp=user.xp + reward_xp,
        total_coins=user.coins + reward_coins
    )
```

---

### 6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–µ–∑–æ–Ω–∞–º–∏ ‚úÖ
**–§–∞–π–ª:** `domain/services/season_service.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω `achievement_service` –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:
  - –ó–∞ —É—á–∞—Å—Ç–∏–µ –≤ —Å–µ–∑–æ–Ω–µ (`season_games`)
  - –ó–∞ –ø–æ–∑–∏—Ü–∏—é –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ (`season_rank`)
- –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∑–∞ —Å—Ç—Ä–∏–∫–∏

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
```python
# –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:
if self.achievement_service:
    progress = await self.season_repo.get_or_create_progress(user_id, season.id)
    await self.achievement_service.check_season_achievements(
        user_id=user_id,
        season_games=progress.games_played,
        season_rank=progress.rank
    )

# –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∏–∫–∞:
if self.achievement_service:
    await self.achievement_service.check_streak_achievements(
        user_id=user_id,
        current_streak=new_streak
    )
```

---

### 7. Handlers –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ ‚úÖ
**–§–∞–π–ª:** `application/handlers/achievement/achievement_handler.py`

**–ú–µ—Ç–æ–¥—ã:**
- `handle_achievements_command()` - –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- `handle_list_all()` - –≤—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º
- `handle_list_completed()` - –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- `handle_category()` - –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `handle_claim_all()` - –∑–∞–±—Ä–∞—Ç—å –≤—Å–µ –Ω–µ–∑–∞–±—Ä–∞–Ω–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã

**–ö–æ–º–∞–Ω–¥–∞:** `/achievements`

**Callback:**
- `ach_menu` - –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- `ach_list_all` - –≤—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- `ach_list_completed` - –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ
- `ach_cat_games` - –∫–∞—Ç–µ–≥–æ—Ä–∏—è "–ò–≥—Ä—ã"
- `ach_cat_activity` - –∫–∞—Ç–µ–≥–æ—Ä–∏—è "–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å"
- `ach_cat_streak` - –∫–∞—Ç–µ–≥–æ—Ä–∏—è "–°—Ç—Ä–∏–∫–∏"
- `ach_cat_season` - –∫–∞—Ç–µ–≥–æ—Ä–∏—è "–°–µ–∑–æ–Ω—ã"
- `ach_cat_tickets` - –∫–∞—Ç–µ–≥–æ—Ä–∏—è "–¢–∏–∫–µ—Ç—ã"
- `ach_claim_all` - –∑–∞–±—Ä–∞—Ç—å –Ω–∞–≥—Ä–∞–¥—ã

---

### 8. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ main_v3.py ‚úÖ

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**

1. **–ò–º–ø–æ—Ä—Ç—ã:**
```python
from infrastructure.database.repositories.achievement_repository import AchievementRepository
from domain.services.achievement_service import AchievementService
from application.handlers.achievement.achievement_handler import AchievementHandler
```

2. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
achievement_repo = AchievementRepository(db_connection.get_pool())
achievement_service = AchievementService(achievement_repo, user_service)
season_service = SeasonService(season_repo, user_service, achievement_service)
game_service = GameService(game_repo, user_service, season_service, achievement_service)
achievement_handler = AchievementHandler(achievement_service, user_service)
```

3. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:**
```python
app.add_handler(CommandHandler("achievements", achievement_handler.handle_achievements_command))

# Callback
callback_router.register_exact("ach_menu", achievement_handler.handle_achievements_command)
callback_router.register_exact("ach_list_all", achievement_handler.handle_list_all)
# ... –∏ —Ç.–¥.
```

---

## üìä –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π

### üéÆ –ò–≥—Ä—ã (5 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π)

| ID | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –†–µ–¥–∫–æ—Å—Ç—å | –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –ù–∞–≥—Ä–∞–¥–∞ |
|----|----------|----------|----------|------------|---------|
| first_win | –ü–µ—Ä–≤–∞—è –ø–æ–±–µ–¥–∞ | –í—ã–∏–≥—Ä–∞–π —Å–≤–æ—é –ø–µ—Ä–≤—É—é –∏–≥—Ä—É | ‚ö™ –û–±—ã—á–Ω–æ–µ | 1 –ø–æ–±–µ–¥–∞ | 100 XP, 50 –º–æ–Ω–µ—Ç |
| winner_10 | –í–µ–∑—É–Ω—á–∏–∫ | –í—ã–∏–≥—Ä–∞–π 10 –∏–≥—Ä | ‚ö™ –û–±—ã—á–Ω–æ–µ | 10 –ø–æ–±–µ–¥ | 200 XP, 100 –º–æ–Ω–µ—Ç |
| winner_50 | –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª | –í—ã–∏–≥—Ä–∞–π 50 –∏–≥—Ä | üîµ –†–µ–¥–∫–æ–µ | 50 –ø–æ–±–µ–¥ | 500 XP, 300 –º–æ–Ω–µ—Ç, —Ä–æ–ª—å |
| winner_100 | –ú–∞—Å—Ç–µ—Ä –∏–≥—Ä | –í—ã–∏–≥—Ä–∞–π 100 –∏–≥—Ä | üü£ –≠–ø–∏—á–µ—Å–∫–æ–µ | 100 –ø–æ–±–µ–¥ | 1000 XP, 500 –º–æ–Ω–µ—Ç, —Ä–æ–ª—å |
| winner_500 | –õ–µ–≥–µ–Ω–¥–∞ | –í—ã–∏–≥—Ä–∞–π 500 –∏–≥—Ä | üü° –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ | 500 –ø–æ–±–µ–¥ | 5000 XP, 2000 –º–æ–Ω–µ—Ç, —Ä–æ–ª—å |

### ‚ö° –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (4 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è)

| ID | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –†–µ–¥–∫–æ—Å—Ç—å | –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –ù–∞–≥—Ä–∞–¥–∞ |
|----|----------|----------|----------|------------|---------|
| active_player | –ê–∫—Ç–∏–≤–Ω—ã–π –∏–≥—Ä–æ–∫ | –°—ã–≥—Ä–∞–π 100 –∏–≥—Ä | ‚ö™ –û–±—ã—á–Ω–æ–µ | 100 –∏–≥—Ä | 300 XP, 150 –º–æ–Ω–µ—Ç |
| dedicated_player | –ü—Ä–µ–¥–∞–Ω–Ω—ã–π –∏–≥—Ä–æ–∫ | –°—ã–≥—Ä–∞–π 500 –∏–≥—Ä | üîµ –†–µ–¥–∫–æ–µ | 500 –∏–≥—Ä | 1000 XP, 500 –º–æ–Ω–µ—Ç, —Ä–æ–ª—å |
| rich_player | –ë–æ–≥–∞—á | –ù–∞–∫–æ–ø–∏ 10000 –º–æ–Ω–µ—Ç | üîµ –†–µ–¥–∫–æ–µ | 10000 –º–æ–Ω–µ—Ç | 500 XP, 1000 –º–æ–Ω–µ—Ç |
| experienced | –û–ø—ã—Ç–Ω—ã–π | –î–æ—Å—Ç–∏–≥–Ω–∏ 10000 XP | üîµ –†–µ–¥–∫–æ–µ | 10000 XP | 1000 XP, 500 –º–æ–Ω–µ—Ç |

### üî• –°—Ç—Ä–∏–∫–∏ (3 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è)

| ID | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –†–µ–¥–∫–æ—Å—Ç—å | –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –ù–∞–≥—Ä–∞–¥–∞ |
|----|----------|----------|----------|------------|---------|
| streak_3 | –ü–æ—Å—Ç–æ—è–Ω—Å—Ç–≤–æ | –ò–≥—Ä–∞–π 3 –¥–Ω—è –ø–æ–¥—Ä—è–¥ | ‚ö™ –û–±—ã—á–Ω–æ–µ | 3 –¥–Ω—è | 150 XP, 75 –º–æ–Ω–µ—Ç |
| streak_7 | –ù–µ–¥–µ–ª—è —Å–∏–ª—ã | –ò–≥—Ä–∞–π 7 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥ | üîµ –†–µ–¥–∫–æ–µ | 7 –¥–Ω–µ–π | 500 XP, 250 –º–æ–Ω–µ—Ç, —Ä–æ–ª—å |
| streak_30 | –ú–µ—Å—è—Ü –ø—Ä–µ–¥–∞–Ω–Ω–æ—Å—Ç–∏ | –ò–≥—Ä–∞–π 30 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥ | üü£ –≠–ø–∏—á–µ—Å–∫–æ–µ | 30 –¥–Ω–µ–π | 2000 XP, 1000 –º–æ–Ω–µ—Ç, —Ä–æ–ª—å |

### üé´ –¢–∏–∫–µ—Ç—ã (2 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è)

| ID | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –†–µ–¥–∫–æ—Å—Ç—å | –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –ù–∞–≥—Ä–∞–¥–∞ |
|----|----------|----------|----------|------------|---------|
| first_ticket | –ü–µ—Ä–≤–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ | –°–æ–∑–¥–∞–π —Å–≤–æ–π –ø–µ—Ä–≤—ã–π —Ç–∏–∫–µ—Ç | ‚ö™ –û–±—ã—á–Ω–æ–µ | 1 —Ç–∏–∫–µ—Ç | 50 XP, 25 –º–æ–Ω–µ—Ç |
| helpful_user | –ü–æ–ª–µ–∑–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | –ü–æ–ª—É—á–∏ 5 —Ä–µ—à—ë–Ω–Ω—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ | üîµ –†–µ–¥–∫–æ–µ | 5 —Ç–∏–∫–µ—Ç–æ–≤ | 300 XP, 150 –º–æ–Ω–µ—Ç |

### üèÜ –°–µ–∑–æ–Ω—ã (4 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è)

| ID | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –†–µ–¥–∫–æ—Å—Ç—å | –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –ù–∞–≥—Ä–∞–¥–∞ |
|----|----------|----------|----------|------------|---------|
| season_participant | –£—á–∞—Å—Ç–Ω–∏–∫ —Å–µ–∑–æ–Ω–∞ | –°—ã–≥—Ä–∞–π —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –∏–≥—Ä—É –≤ —Å–µ–∑–æ–Ω–µ | ‚ö™ –û–±—ã—á–Ω–æ–µ | 1 –∏–≥—Ä–∞ | 100 XP, 50 –º–æ–Ω–µ—Ç |
| season_top50 | –¢–æ–ø-50 —Å–µ–∑–æ–Ω–∞ | –ü–æ–ø–∞–¥–∏ –≤ —Ç–æ–ø-50 —Å–µ–∑–æ–Ω–∞ | üîµ –†–µ–¥–∫–æ–µ | –¢–æ–ø-50 | 500 XP, 250 –º–æ–Ω–µ—Ç |
| season_top10 | –¢–æ–ø-10 —Å–µ–∑–æ–Ω–∞ | –ü–æ–ø–∞–¥–∏ –≤ —Ç–æ–ø-10 —Å–µ–∑–æ–Ω–∞ | üü£ –≠–ø–∏—á–µ—Å–∫–æ–µ | –¢–æ–ø-10 | 1500 XP, 750 –º–æ–Ω–µ—Ç, —Ä–æ–ª—å |
| season_champion | –ß–µ–º–ø–∏–æ–Ω —Å–µ–∑–æ–Ω–∞ | –°—Ç–∞–Ω—å –ø–µ—Ä–≤—ã–º –≤ —Å–µ–∑–æ–Ω–µ | üü° –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ | 1 –º–µ—Å—Ç–æ | 5000 XP, 2500 –º–æ–Ω–µ—Ç, —Ä–æ–ª—å |

### üåü –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ (2 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, —Å–∫—Ä—ã—Ç—ã–µ)

| ID | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –†–µ–¥–∫–æ—Å—Ç—å | –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –ù–∞–≥—Ä–∞–¥–∞ |
|----|----------|----------|----------|------------|---------|
| lucky_spin | –£–¥–∞—á–∞ —É–ª—ã–±–Ω—É–ª–∞—Å—å | –í—ã–∏–≥—Ä–∞–π –¥–∂–µ–∫–ø–æ—Ç –≤ —Å–ø–∏–Ω–µ | üü£ –≠–ø–∏—á–µ—Å–∫–æ–µ | –î–∂–µ–∫–ø–æ—Ç | 1000 XP, 500 –º–æ–Ω–µ—Ç |
| perfect_quiz | –≠—Ä—É–¥–∏—Ç | –û—Ç–≤–µ—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞ 10 –∫–≤–∏–∑–æ–≤ –ø–æ–¥—Ä—è–¥ | üü£ –≠–ø–∏—á–µ—Å–∫–æ–µ | 10 –ø–æ–¥—Ä—è–¥ | 1500 XP, 750 –º–æ–Ω–µ—Ç, —Ä–æ–ª—å |

---

## üöÄ –ó–∞–ø—É—Å–∫

### 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é:
```bash
cd TTFD/telegram-bot
psql -U postgres -d ttfd_bot -f infrastructure/database/migrations/004_achievements.sql
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
–ú–∏–≥—Ä–∞—Ü–∏—è 004: –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!
total_achievements: 20
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞:
```bash
python main_v3.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
============================================================
üöÄ –ó–∞–ø—É—Å–∫ TTFD Telegram Bot v3.0 (Clean Architecture)
============================================================

üì° –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL...
üì° –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis...
üîß –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è repositories...
üîß –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è services...
üîß –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è handlers...
üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è handlers...
üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è callback router...
üßπ –ó–∞–ø—É—Å–∫ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á...

============================================================
‚úÖ TTFD Bot v3.0 –∑–∞–ø—É—â–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!
   ‚Ä¢ Clean Architecture
   ‚Ä¢ PostgreSQL
   ‚Ä¢ Redis Cache
   ‚Ä¢ Domain-Driven Design
   ‚Ä¢ Role-Based Access Control (RBAC)
   ‚Ä¢ Centralized Callback Router
   ‚Ä¢ State Manager with TTL
   ‚Ä¢ Season System (30 days)
   ‚Ä¢ Achievement System
============================================================

üí° –û—Ç–ø—Ä–∞–≤—å /start, /games, /season –∏–ª–∏ /achievements –±–æ—Ç—É –≤ Telegram
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π:
```
/achievements
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–ø–æ–ª—É—á–µ–Ω–æ, –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ, –ø—Ä–æ—Ü–µ–Ω—Ç)
- –ö–Ω–æ–ø–∫–∏: –í—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, –ü–æ–ª—É—á–µ–Ω–Ω—ã–µ, –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
- –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–µ–∑–∞–±—Ä–∞–Ω–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã - –∫–Ω–æ–ø–∫–∞ "–ó–∞–±—Ä–∞—Ç—å –Ω–∞–≥—Ä–∞–¥—ã"

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:
```
1. /games ‚Üí —Å—ã–≥—Ä–∞—Ç—å –∏–≥—Ä—É ‚Üí –≤—ã–∏–≥—Ä–∞—Ç—å
2. /achievements ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
- –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "–ü–µ—Ä–≤–∞—è –ø–æ–±–µ–¥–∞" –ø–æ–ª—É—á–µ–Ω–æ
- –ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±–Ω–æ–≤–ª—ë–Ω
- –ù–∞–≥—Ä–∞–¥—ã –≤—ã–¥–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### 3. –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:
```
/achievements ‚Üí üéÆ –ò–≥—Ä—ã
/achievements ‚Üí üî• –°—Ç—Ä–∏–∫–∏
/achievements ‚Üí üèÜ –°–µ–∑–æ–Ω—ã
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
- –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∫–∞–∂–¥–æ–º—É
- –ü—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### 4. –°—Ç—Ä–∏–∫–∏:
```
–î–µ–Ω—å 1: /games ‚Üí —Å—ã–≥—Ä–∞—Ç—å
–î–µ–Ω—å 2: /games ‚Üí —Å—ã–≥—Ä–∞—Ç—å
–î–µ–Ω—å 3: /games ‚Üí —Å—ã–≥—Ä–∞—Ç—å
/achievements ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
- –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "–ü–æ—Å—Ç–æ—è–Ω—Å—Ç–≤–æ" (3 –¥–Ω—è) –ø–æ–ª—É—á–µ–Ω–æ
- –ü—Ä–æ–≥—Ä–µ—Å—Å –∫ "–ù–µ–¥–µ–ª—è —Å–∏–ª—ã" (7 –¥–Ω–µ–π)

### 5. –°–µ–∑–æ–Ω–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:
```
1. /season ‚Üí –∏–≥—Ä–∞—Ç—å –≤ —Å–µ–∑–æ–Ω–µ
2. /achievements ‚Üí üèÜ –°–µ–∑–æ–Ω—ã
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
- "–£—á–∞—Å—Ç–Ω–∏–∫ —Å–µ–∑–æ–Ω–∞" –ø–æ–ª—É—á–µ–Ω–æ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π –∏–≥—Ä—ã
- –ü—Ä–æ–≥—Ä–µ—Å—Å –∫ —Ç–æ–ø-50, —Ç–æ–ø-10, —á–µ–º–ø–∏–æ–Ω

---

## üîç –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–æ—á–µ–º—É –±–µ–∑–æ–ø–∞—Å–Ω–æ:

1. **–ù–µ –ª–æ–º–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥:**
   - `achievement_service` –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω –≤–µ–∑–¥–µ
   - –ï—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
   - –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î

2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**
   - –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
   - –ù–∞–≥—Ä–∞–¥—ã –≤—ã–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –ù–µ—Ç —Ä—É—á–Ω–æ–π –≤—ã–¥–∞—á–∏

3. **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞:**
   - –í—Å—è –ª–æ–≥–∏–∫–∞ –≤ `AchievementService`
   - –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ –º–æ–¥—É–ª–∏
   - –õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞:

1. **–ü–æ—Å–ª–µ –∏–≥—Ä—ã:**
```python
# –í game_service.py
await achievement_service.check_game_achievements(
    user_id=user.id,
    games_played=stats.total_games,
    games_won=stats.total_wins
)
```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ —Å–µ—Ä–≤–∏—Å–µ:**
```python
# –í achievement_service.py
async def check_achievements(user_id, trigger_type, current_value):
    # –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —ç—Ç–æ–≥–æ —Ç–∏–ø–∞
    relevant_achievements = [
        ach for ach in all_achievements
        if ach.requirement_type == trigger_type
    ]
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥–æ–µ
    for achievement in relevant_achievements:
        progress = await get_or_create_progress(...)
        
        if not progress.is_completed:
            updated = await update_progress(...)
            
            if updated.is_completed:
                # –í—ã–¥–∞—ë–º –Ω–∞–≥—Ä–∞–¥—É
                await _give_achievement_reward(...)
```

3. **–í—ã–¥–∞—á–∞ –Ω–∞–≥—Ä–∞–¥—ã:**
```python
async def _give_achievement_reward(user_id, achievement):
    # –î–æ–±–∞–≤–ª—è–µ–º XP –∏ –º–æ–Ω–µ—Ç—ã
    await user_repo.update_xp(user_id, achievement.reward_xp)
    await user_repo.update_coins(user_id, achievement.reward_coins)
    
    # –û—Ç–º–µ—á–∞–µ–º —á—Ç–æ –Ω–∞–≥—Ä–∞–¥—ã –ø–æ–ª—É—á–µ–Ω—ã
    await achievement_repo.mark_rewards_claimed(...)
    
    # TODO: –í—ã–¥–∞—Ç—å Discord —Ä–æ–ª—å
```

### Edge cases:

1. **–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —É–∂–µ –ø–æ–ª—É—á–µ–Ω–æ:**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ `is_completed` –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
   - –ù–∞–≥—Ä–∞–¥—ã –Ω–µ –≤—ã–¥–∞—é—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ

2. **–ù–µ—Å–∫–æ–ª—å–∫–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ:**
   - –ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤—Å–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ
   - –ù–∞–≥—Ä–∞–¥—ã –∑–∞ –∫–∞–∂–¥–æ–µ –≤—ã–¥–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ

3. **–ü—Ä–æ–≥—Ä–µ—Å—Å –±–µ–∑ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:**
   - –°–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ
   - –ù–∞—á–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å = 0

4. **–°–∫—Ä—ã—Ç—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:**
   - –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ
   - –ü–æ–ª—É—á–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
   - –ù–∞–≥—Ä–∞–¥—ã –≤—ã–¥–∞—é—Ç—Å—è —Ç–∞–∫ –∂–µ

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏

### –î–æ:
- ‚ùå –ù–µ—Ç –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã—Ö —Ü–µ–ª–µ–π
- ‚ùå –ù–µ—Ç –Ω–∞–≥—Ä–∞–¥ –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- ‚ùå –ù–µ—Ç –º–æ—Ç–∏–≤–∞—Ü–∏–∏ –∏–≥—Ä–∞—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω–æ

### –ü–æ—Å–ª–µ:
- ‚úÖ 20 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –≤ 6 –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –≤—ã–¥–∞—á–∞ –Ω–∞–≥—Ä–∞–¥
- ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∫–∞–∂–¥–æ–º—É –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—é
- ‚úÖ 4 —É—Ä–æ–≤–Ω—è —Ä–µ–¥–∫–æ—Å—Ç–∏
- ‚úÖ Discord —Ä–æ–ª–∏ –∑–∞ 9 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- ‚úÖ –°–∫—Ä—ã—Ç—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–≥—Ä–∞–º–∏, —Å–µ–∑–æ–Ω–∞–º–∏, —Å—Ç—Ä–∏–∫–∞–º–∏

---

## üéØ –ß—Ç–æ –¥–∞–ª—å—à–µ

### –≠—Ç–∞–ø 2.3: –¢–∏–∫–µ—Ç—ã v2
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π —Å —Ç–∏–∫–µ—Ç–∞–º–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/–∑–∞–∫—Ä—ã—Ç–∏–∏ —Ç–∏–∫–µ—Ç–∞
- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∑–∞ –ø–æ–º–æ—â—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫–µ

### –≠—Ç–∞–ø 2.4: Discord –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –ü—Ä–∏–≤—è–∑–∫–∞ Telegram ‚Üî Discord
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤—ã–¥–∞—á–∞ Discord —Ä–æ–ª–µ–π –∑–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–∞–≥—Ä–∞–¥

### –≠—Ç–∞–ø 2.5: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- –ë–æ–ª—å—à–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∑–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–í—ã–∏–≥—Ä–∞–π –≤—Å–µ —Ç–∏–ø—ã –∏–≥—Ä")
- –°–µ–∑–æ–Ω–Ω—ã–µ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç

- [x] –ú–æ–¥–µ–ª–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- [x] –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î
- [x] –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- [x] –°–µ—Ä–≤–∏—Å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–≥—Ä–∞–º–∏
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–µ–∑–æ–Ω–∞–º–∏
- [x] Handlers –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- [x] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ main_v3.py
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Telegram
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≤—ã–¥–∞—á–∏ –Ω–∞–≥—Ä–∞–¥

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É  
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

**–§–∞–π–ª—ã:**
- `domain/models/achievement.py`
- `infrastructure/database/migrations/004_achievements.sql`
- `infrastructure/database/repositories/achievement_repository.py`
- `domain/services/achievement_service.py`
- `application/handlers/achievement/achievement_handler.py`
- `domain/services/game_service.py` (–æ–±–Ω–æ–≤–ª—ë–Ω)
- `domain/services/season_service.py` (–æ–±–Ω–æ–≤–ª—ë–Ω)
- `main_v3.py` (–æ–±–Ω–æ–≤–ª—ë–Ω)
