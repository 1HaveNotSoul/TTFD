{% extends "base.html" %}

{% block title %}–ù–∞—Å—Ç—Ä–æ–π–∫–∏ - TTFD{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="/static/css/settings.css">
{% endblock %}

{% block content %}
<div class="settings-container">
    <div class="settings-panel">
        <div class="panel-header">
            <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
        </div>

        <!-- –¢–∞–±—ã -->
        <div class="tabs">
            <button class="tab active" data-tab="profile">–ü—Ä–æ—Ñ–∏–ª—å</button>
            <button class="tab" data-tab="appearance">–í–Ω–µ—à–Ω–∏–π –≤–∏–¥</button>
            <button class="tab" data-tab="privacy">–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å</button>
            <button class="tab" data-tab="notifications">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</button>
            <button class="tab" data-tab="advanced">–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ</button>
        </div>

        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç —Ç–∞–±–æ–≤ -->
        <div class="tab-content">
            <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
            <div class="tab-pane active" id="profile">
                <h3>üë§ –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                
                <div class="form-group">
                    <label>–û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è</label>
                    <input type="text" id="display_name" value="{{ user.username }}" class="text-input">
                </div>
                
                <div class="form-group">
                    <label>–û —Å–µ–±–µ</label>
                    <textarea id="bio" placeholder="–†–∞—Å—Å–∫–∞–∂–∏ –æ —Å–µ–±–µ..." rows="4" class="text-input">{{ user.bio }}</textarea>
                </div>
            </div>

            <!-- –í–Ω–µ—à–Ω–∏–π –≤–∏–¥ -->
            <div class="tab-pane" id="appearance">
                <div class="form-group">
                    <label>–ê–≤–∞—Ç–∞—Ä–∫–∞</label>
                    <div class="avatar-upload">
                        <img src="{{ user.avatar }}" alt="Avatar" class="avatar-preview" id="avatarPreview">
                        <input type="file" id="avatar_file" accept="image/*" hidden>
                        <button type="button" class="btn btn-secondary" onclick="document.getElementById('avatar_file').click()">
                            –ó–∞–≥—Ä—É–∑–∏—Ç—å
                        </button>
                    </div>
                </div>
            </div>

            <!-- –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å -->
            <div class="tab-pane" id="privacy">
                <h3>üîí –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å</h3>
                
                <div class="toggle-item">
                    <label class="toggle-label">
                        <input type="checkbox" id="profile_public" checked>
                        <span class="toggle-slider" data-on="–ü—É–±–ª–∏—á–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å" data-off="–ü—Ä–∏–≤–∞—Ç–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å">–ü—É–±–ª–∏—á–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å</span>
                    </label>
                    <small>–î—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å —Ç–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å</small>
                </div>
                
                <div class="toggle-item">
                    <label class="toggle-label">
                        <input type="checkbox" id="show_stats" checked>
                        <span class="toggle-slider" data-on="–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∏–¥–Ω–∞" data-off="–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∫—Ä—ã—Ç–∞">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∏–¥–Ω–∞</span>
                    </label>
                    <small>–û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –æ—á–∫–∏ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</small>
                </div>
            </div>

            <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
            <div class="tab-pane" id="notifications">
                <h3>üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
                
                <div class="toggle-item">
                    <label class="toggle-label">
                        <input type="checkbox" id="sound_notifications" checked>
                        <span class="toggle-slider" data-on="–ó–≤—É–∫ –≤–∫–ª—é—á–µ–Ω" data-off="–ó–≤—É–∫ –≤—ã–∫–ª—é—á–µ–Ω">–ó–≤—É–∫ –≤–∫–ª—é—á–µ–Ω</span>
                    </label>
                </div>
            </div>

            <!-- –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
            <div class="tab-pane" id="advanced">
                <div class="form-group">
                    <label>Email –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</label>
                    <input type="email" id="user_email" placeholder="your@email.com" class="text-input">
                </div>
                
                <div class="form-group">
                    <button class="btn btn-primary" onclick="sendTestNotification()" style="width: 100%;">
                        üìß –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                    </button>
                </div>
                
                <hr style="margin: 2rem 0; border: none; border-top: 1px solid var(--border);">
                
                <h3 style="color: #ef4444; margin-bottom: 1rem;">‚ö†Ô∏è –û–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞</h3>
                
                <div class="form-group">
                    <button class="btn btn-danger" onclick="logoutAccount()" style="width: 100%; background: #ef4444; border-color: #ef4444;">
                        üö™ –í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞
                    </button>
                    <small style="display: block; margin-top: 0.5rem; color: var(--text-light);">
                        –í—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
                    </small>
                </div>
            </div>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
        <div class="panel-actions">
            <button class="btn btn-secondary" onclick="resetSettings()">–°–±—Ä–æ—Å–∏—Ç—å</button>
            <button class="btn btn-primary" onclick="saveSettings()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
        </div>
    </div>
</div>

<div id="message" class="message"></div>
{% endblock %}

{% block extra_js %}
<script src="/static/js/settings.js"></script>
{% endblock %}
